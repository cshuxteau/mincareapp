<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare Connect - Between Sessions Care</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366F1;
            --primary-dark: #4F46E5;
            --secondary: #10B981;
            --accent: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;
            --purple: #8B5CF6;
            --pink: #EC4899;
            --bg-main: #F9FAFB;
            --bg-card: #FFFFFF;
            --text-dark: #111827;
            --text-medium: #6B7280;
            --text-light: #9CA3AF;
            --border: #E5E7EB;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-main);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 25px 0;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            font-size: 1.6em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .next-session {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            font-size: 0.9em;
        }

        .header-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85em;
            opacity: 0.9;
        }

        /* Navigation */
        nav {
            background: var(--bg-card);
            border-radius: 15px;
            box-shadow: var(--shadow-md);
            margin-bottom: 25px;
            padding: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--border);
        }

        .nav-btn {
            background: transparent;
            color: var(--text-medium);
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            background: var(--bg-main);
            color: var(--primary);
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Sections */
        .section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .card h2 {
            color: var(--text-dark);
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: var(--text-dark);
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        /* Mood Tracker */
        .mood-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .mood-option {
            text-align: center;
            padding: 20px 15px;
            border: 3px solid var(--border);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mood-option:hover {
            background: var(--bg-main);
            transform: translateY(-3px);
        }

        .mood-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .mood-emoji {
            font-size: 3em;
            display: block;
            margin-bottom: 8px;
        }

        .mood-label {
            font-weight: 600;
            font-size: 0.9em;
        }

        /* Medication Tracker */
        .medication-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .medication-item {
            background: var(--bg-main);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .medication-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .medication-info {
            flex: 1;
        }

        .medication-name {
            font-weight: 600;
            font-size: 1.1em;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .medication-details {
            color: var(--text-medium);
            font-size: 0.9em;
        }

        .medication-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .med-taken {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--secondary);
            background: var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .med-taken.pending {
            background: white;
            color: var(--text-light);
            border-color: var(--border);
        }

        .med-taken:hover {
            transform: scale(1.1);
        }

        /* Activity Cards */
        .activity-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary);
        }

        .activity-icon {
            font-size: 2.5em;
            margin-bottom: 12px;
        }

        .activity-title {
            font-weight: 600;
            font-size: 1.1em;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .activity-desc {
            color: var(--text-medium);
            font-size: 0.9em;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .activity-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .badge-primary { background: rgba(99, 102, 241, 0.1); color: var(--primary); }
        .badge-success { background: rgba(16, 185, 129, 0.1); color: var(--secondary); }
        .badge-warning { background: rgba(245, 158, 11, 0.1); color: var(--accent); }
        .badge-danger { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
        .badge-info { background: rgba(59, 130, 246, 0.1); color: var(--info); }

        /* Buttons */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow);
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--text-medium);
        }

        .btn-success {
            background: var(--secondary);
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-full {
            width: 100%;
            justify-content: center;
        }

        /* Alerts */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            border-left: 4px solid;
        }

        .alert-icon {
            font-size: 1.5em;
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--info);
            color: var(--text-dark);
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--secondary);
            color: var(--text-dark);
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--accent);
            color: var(--text-dark);
        }

        .alert-danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--danger);
            color: var(--text-dark);
        }

        /* Progress */
        .progress-container {
            margin: 15px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: var(--text-medium);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--bg-main);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--purple));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Challenge Card */
        .challenge-card {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .challenge-card::before {
            content: 'üéØ';
            position: absolute;
            font-size: 15em;
            opacity: 0.1;
            top: -50px;
            right: -50px;
        }

        .challenge-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .challenge-desc {
            font-size: 1.05em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .challenge-progress {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        /* Education Card */
        .education-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .education-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .education-header {
            padding: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        }

        .education-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .education-title {
            font-weight: 600;
            font-size: 1.2em;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .education-subtitle {
            color: var(--text-medium);
            font-size: 0.9em;
        }

        .education-body {
            padding: 20px;
        }

        /* Caregiver Connection */
        .caregiver-card {
            background: linear-gradient(135deg, var(--secondary), #059669);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow-lg);
        }

        .caregiver-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .caregiver-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
        }

        .caregiver-info h3 {
            margin: 0;
            font-size: 1.3em;
        }

        .caregiver-role {
            opacity: 0.9;
            font-size: 0.9em;
        }

        /* Form Elements */
        .form-group {
            margin: 20px 0;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: inherit;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Checklist */
        .checklist {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .checklist-item {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            border-color: var(--primary);
            background: var(--bg-main);
        }

        .checklist-item.checked {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--secondary);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            background: white;
        }

        .checklist-item.checked .checkbox {
            background: var(--secondary);
            border-color: var(--secondary);
            color: white;
        }

        .checklist-label {
            flex: 1;
            font-weight: 500;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-medium);
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--bg-card);
            margin: 3% auto;
            padding: 35px;
            border-radius: 20px;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-dark);
        }

        .close {
            color: var(--text-medium);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close:hover {
            background: var(--bg-main);
            color: var(--text-dark);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
        }

        .timeline-dot {
            position: absolute;
            left: -26px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid var(--bg-card);
        }

        .timeline-content {
            background: var(--bg-main);
            padding: 15px;
            border-radius: 10px;
        }

        .timeline-date {
            color: var(--text-medium);
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 10% 5%;
                padding: 25px;
            }

            nav {
                position: relative;
                top: 0;
            }

            .header-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Stats Display */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-box {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .stat-box-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-box-label {
            color: var(--text-medium);
            font-size: 0.9em;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .quick-action {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .quick-action-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quick-action-label {
            font-weight: 600;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-top">
                <div class="logo">
                    <span>üåü</span>
                    <span>MindCare Connect</span>
                </div>
                <div class="next-session">
                    <strong>Next Session:</strong> Jan 25, 2026 at 2:00 PM
                </div>
            </div>

            <div class="header-stats">
                <div class="stat-card">
                    <div class="stat-value" id="headerStreak">7</div>
                    <div class="stat-label">Day Streak üî•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="headerMedAdherence">86%</div>
                    <div class="stat-label">Medication</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="headerActivities">12</div>
                    <div class="stat-label">Activities Done</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="headerMood">üòä</div>
                    <div class="stat-label">Today's Mood</div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <nav>
            <button class="nav-btn active" onclick="showSection('dashboard')">
                üè† Dashboard
            </button>
            <button class="nav-btn" onclick="showSection('checkin')">
                üìä Daily Check-In
            </button>
            <button class="nav-btn" onclick="showSection('medication')">
                üíä Medications
            </button>
            <button class="nav-btn" onclick="showSection('activities')">
                ‚ú® Activities
            </button>
            <button class="nav-btn" onclick="showSection('education')">
                üìö Learn
            </button>
            <button class="nav-btn" onclick="showSection('challenges')">
                üéØ Challenges
            </button>
            <button class="nav-btn" onclick="showSection('caregiver')">
                üíö Care Team
            </button>
            <button class="nav-btn" onclick="showSection('progress')">
                üìà Progress
            </button>
        </nav>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section active">
            <div class="grid-2">
                <div class="card">
                    <h2>üëã Welcome Back!</h2>
                    <p style="margin-bottom: 20px;">Here's your between-sessions overview. You're doing great keeping up with your care plan!</p>

                    <div class="alert alert-success">
                        <span class="alert-icon">üéâ</span>
                        <div>
                            <strong>7-Day Streak!</strong> You've completed your daily check-in for a full week. Keep it up!
                        </div>
                    </div>

                    <h3>Today's To-Do</h3>
                    <div class="checklist" id="todayTodos"></div>
                </div>

                <div>
                    <div class="challenge-card">
                        <div class="challenge-title">This Week's Challenge</div>
                        <div class="challenge-desc">Practice 5-minute mindfulness daily for 7 days</div>
                        <div class="challenge-progress">
                            <div class="progress-label">
                                <span>Progress</span>
                                <span>5/7 days</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 71%; background: rgba(255,255,255,0.8);"></div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h2>üéØ Quick Actions</h2>
                        <div class="quick-actions">
                            <div class="quick-action" onclick="showSection('checkin')">
                                <div class="quick-action-icon">üìä</div>
                                <div class="quick-action-label">Check In</div>
                            </div>
                            <div class="quick-action" onclick="showSection('medication')">
                                <div class="quick-action-icon">üíä</div>
                                <div class="quick-action-label">Meds</div>
                            </div>
                            <div class="quick-action" onclick="showSection('activities')">
                                <div class="quick-action-icon">‚ú®</div>
                                <div class="quick-action-label">Activity</div>
                            </div>
                            <div class="quick-action" onclick="showCrisisHelp()">
                                <div class="quick-action-icon">üÜò</div>
                                <div class="quick-action-label">Help</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üìã Preparing for Your Next Session</h2>
                <p style="margin-bottom: 15px;">Things to discuss with your therapist:</p>
                <div class="timeline" id="sessionPrep"></div>
                <button class="btn btn-outline" onclick="addSessionNote()">
                    <span>‚ûï</span> Add Note for Therapist
                </button>
            </div>
        </div>

        <!-- Daily Check-In Section -->
        <div id="checkin" class="section">
            <div class="card">
                <h2>üìä Daily Check-In</h2>
                <p style="margin-bottom: 25px; color: var(--text-medium);">
                    Complete your daily check-in to track your progress and help your care team understand how you're doing.
                </p>

                <h3>1. How are you feeling today?</h3>
                <div class="mood-options">
                    <div class="mood-option" onclick="selectMood(1, this)">
                        <span class="mood-emoji">üò¢</span>
                        <div class="mood-label">Struggling</div>
                    </div>
                    <div class="mood-option" onclick="selectMood(2, this)">
                        <span class="mood-emoji">üòï</span>
                        <div class="mood-label">Difficult</div>
                    </div>
                    <div class="mood-option" onclick="selectMood(3, this)">
                        <span class="mood-emoji">üòê</span>
                        <div class="mood-label">Okay</div>
                    </div>
                    <div class="mood-option" onclick="selectMood(4, this)">
                        <span class="mood-emoji">üôÇ</span>
                        <div class="mood-label">Good</div>
                    </div>
                    <div class="mood-option" onclick="selectMood(5, this)">
                        <span class="mood-emoji">üòÑ</span>
                        <div class="mood-label">Great</div>
                    </div>
                </div>

                <h3>2. Wellness Check</h3>
                <div class="form-group">
                    <label class="form-label">Sleep Quality (1-10)</label>
                    <input type="range" class="form-input" id="sleepQuality" min="1" max="10" value="7"
                           oninput="document.getElementById('sleepValue').textContent = this.value">
                    <div style="text-align: center; margin-top: 8px;">
                        <strong><span id="sleepValue">7</span>/10</strong>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Energy Level (1-10)</label>
                    <input type="range" class="form-input" id="energyLevel" min="1" max="10" value="6"
                           oninput="document.getElementById('energyValue').textContent = this.value">
                    <div style="text-align: center; margin-top: 8px;">
                        <strong><span id="energyValue">6</span>/10</strong>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Stress Level (1-10)</label>
                    <input type="range" class="form-input" id="stressLevel" min="1" max="10" value="5"
                           oninput="document.getElementById('stressValue').textContent = this.value">
                    <div style="text-align: center; margin-top: 8px;">
                        <strong><span id="stressValue">5</span>/10</strong>
                    </div>
                </div>

                <h3>3. Physical Wellness (Optional)</h3>
                <div class="alert alert-info">
                    <span class="alert-icon">üí°</span>
                    <div>
                        <strong>Optional:</strong> If you have a wearable device (Apple Watch, Fitbit, etc.), you can add biometric data to get more personalized recommendations.
                    </div>
                </div>

                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">Resting Heart Rate (optional)</label>
                        <input type="number" class="form-input" id="heartRate" placeholder="e.g., 72 bpm">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Steps Today (optional)</label>
                        <input type="number" class="form-input" id="steps" placeholder="e.g., 5000">
                    </div>
                </div>

                <h3>4. Self-Care Activities Today</h3>
                <div class="checklist">
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checkbox"></div>
                        <div class="checklist-label">Took my medications as prescribed</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checkbox"></div>
                        <div class="checklist-label">Ate regular meals</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checkbox"></div>
                        <div class="checklist-label">Got outside or exercised</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checkbox"></div>
                        <div class="checklist-label">Connected with someone</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checkbox"></div>
                        <div class="checklist-label">Practiced a coping skill</div>
                    </div>
                </div>

                <h3>5. Quick Note (Optional)</h3>
                <div class="form-group">
                    <textarea class="form-textarea" id="checkinNote"
                              placeholder="Anything notable about today? (What went well, what was challenging, etc.)"></textarea>
                </div>

                <button class="btn btn-success btn-full" onclick="saveCheckin()">
                    <span>‚úÖ</span> Complete Check-In
                </button>
            </div>

            <div class="card">
                <h2>üìà Your Week at a Glance</h2>
                <div id="weekMoodChart" class="stats-grid"></div>
            </div>
        </div>

        <!-- Medication Section -->
        <div id="medication" class="section">
            <div class="card">
                <h2>üíä Medication Management</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Stay on track with your medications. Tap to mark as taken, and track any side effects.
                </p>

                <div class="alert alert-success">
                    <span class="alert-icon">‚úÖ</span>
                    <div>
                        <strong>Great adherence!</strong> You've taken your medications 6 out of 7 days this week (86%)
                    </div>
                </div>

                <h3>Today's Medications</h3>
                <div class="medication-list" id="todayMedications"></div>

                <button class="btn btn-outline" onclick="addMedication()">
                    <span>‚ûï</span> Add Medication
                </button>
            </div>

            <div class="card">
                <h2>üìä Medication Adherence This Week</h2>
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Overall Adherence</span>
                        <span>86%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 86%;"></div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <div class="grid-3" id="weeklyMedicationGrid"></div>
                </div>
            </div>

            <div class="card">
                <h2>‚ö†Ô∏è Side Effects & Concerns</h2>
                <p style="margin-bottom: 15px; color: var(--text-medium);">
                    Track any side effects you're experiencing. This information helps your doctor adjust your treatment.
                </p>

                <button class="btn btn-outline" onclick="reportSideEffect()">
                    <span>üìù</span> Report Side Effect
                </button>

                <div id="sideEffectsList" style="margin-top: 20px;"></div>

                <div class="alert alert-info" style="margin-top: 20px;">
                    <span class="alert-icon">üí°</span>
                    <div>
                        <strong>Reminder:</strong> Never stop or change your medications without talking to your doctor first, even if you're experiencing side effects.
                    </div>
                </div>
            </div>
        </div>

        <!-- Activities Section -->
        <div id="activities" class="section">
            <div class="card">
                <h2>‚ú® Behavioral Activities</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    These activities are designed to help you practice the skills you're learning in therapy. Complete activities between sessions to reinforce your progress.
                </p>

                <div class="tabs">
                    <button class="tab active" onclick="filterActivities('all')">All Activities</button>
                    <button class="tab" onclick="filterActivities('quick')">Quick (5 min)</button>
                    <button class="tab" onclick="filterActivities('mood')">Mood Boost</button>
                    <button class="tab" onclick="filterActivities('anxiety')">Anxiety Relief</button>
                    <button class="tab" onclick="filterActivities('mindfulness')">Mindfulness</button>
                    <button class="tab" onclick="filterActivities('social')">Social</button>
                </div>

                <div class="grid-3" id="activitiesList"></div>
            </div>

            <div class="card">
                <h2>üé® Creative Expression</h2>
                <p style="margin-bottom: 15px; color: var(--text-medium);">
                    Sometimes words aren't enough. Try expressing yourself through creative activities.
                </p>

                <div class="grid-3">
                    <div class="activity-card" onclick="startActivity('creative-drawing')">
                        <div class="activity-icon">üé®</div>
                        <div class="activity-title">Free Drawing</div>
                        <div class="activity-desc">Draw your emotions without judgment</div>
                    </div>
                    <div class="activity-card" onclick="startActivity('creative-writing')">
                        <div class="activity-icon">‚úçÔ∏è</div>
                        <div class="activity-title">Expressive Writing</div>
                        <div class="activity-desc">Write freely about what's on your mind</div>
                    </div>
                    <div class="activity-card" onclick="startActivity('creative-music')">
                        <div class="activity-icon">üéµ</div>
                        <div class="activity-title">Music & Movement</div>
                        <div class="activity-desc">Let music shift your mood</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Education Section -->
        <div id="education" class="section">
            <div class="card">
                <h2>üìö Patient Education</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Learn more about your mental health, coping strategies, and treatment options. Knowledge is power!
                </p>
            </div>

            <div class="grid-2" id="educationLibrary"></div>

            <div class="card">
                <h2>üé• Video Library</h2>
                <p style="margin-bottom: 15px; color: var(--text-medium);">
                    Short educational videos on mental health topics
                </p>

                <div class="grid-3">
                    <div class="education-card" onclick="watchVideo('anxiety-basics')">
                        <div class="education-header">
                            <div class="education-icon">üìπ</div>
                            <div class="education-title">Understanding Anxiety</div>
                            <div class="education-subtitle">8 minutes</div>
                        </div>
                    </div>
                    <div class="education-card" onclick="watchVideo('breathing')">
                        <div class="education-header">
                            <div class="education-icon">üìπ</div>
                            <div class="education-title">Breathing Techniques</div>
                            <div class="education-subtitle">5 minutes</div>
                        </div>
                    </div>
                    <div class="education-card" onclick="watchVideo('sleep-hygiene')">
                        <div class="education-header">
                            <div class="education-icon">üìπ</div>
                            <div class="education-title">Better Sleep Habits</div>
                            <div class="education-subtitle">6 minutes</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Challenges Section -->
        <div id="challenges" class="section">
            <div class="card">
                <h2>üéØ Weekly Challenges</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Build healthy habits with weekly challenges. Complete challenges to unlock achievements!
                </p>

                <div class="challenge-card">
                    <div class="challenge-title">Current Challenge: Mindfulness Week</div>
                    <div class="challenge-desc">
                        Practice 5 minutes of mindfulness meditation every day for 7 days.
                        You're building a powerful habit for managing stress and anxiety!
                    </div>
                    <div class="challenge-progress">
                        <div class="progress-label">
                            <span>Days Completed</span>
                            <span>5/7</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 71%; background: rgba(255,255,255,0.9);"></div>
                        </div>
                        <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.95;">
                            Just 2 more days to complete this challenge! üéâ
                        </p>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Available Challenges</h3>
                <div class="grid-3" id="challengesList"></div>
            </div>

            <div class="card">
                <h2>üèÜ Your Achievements</h2>
                <div class="grid-4">
                    <div class="stat-box">
                        <div class="stat-box-value">üî•</div>
                        <div class="stat-box-label">7 Day Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">‚úÖ</div>
                        <div class="stat-box-label">10 Check-ins</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">üìö</div>
                        <div class="stat-box-label">5 Lessons</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">üéØ</div>
                        <div class="stat-box-label">First Challenge</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Caregiver Section -->
        <div id="caregiver" class="section">
            <div class="grid-2">
                <div>
                    <div class="caregiver-card">
                        <div class="caregiver-header">
                            <div class="caregiver-avatar">üë®‚Äç‚öïÔ∏è</div>
                            <div class="caregiver-info">
                                <h3>Dr. Sarah Johnson</h3>
                                <div class="caregiver-role">Therapist</div>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>Next Session:</strong> Jan 25, 2026 at 2:00 PM
                        </div>
                        <button class="btn" style="background: rgba(255,255,255,0.3); width: 100%;">
                            <span>üìß</span> Send Message
                        </button>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h2>üë® Care Partner</h2>
                        <div class="caregiver-header" style="padding: 15px; background: var(--bg-main); border-radius: 10px;">
                            <div class="caregiver-avatar" style="background: var(--primary); color: white;">üë®</div>
                            <div class="caregiver-info">
                                <h3 style="color: var(--text-dark); margin: 0;">John (Dad)</h3>
                                <div class="caregiver-role" style="color: var(--text-medium);">Family Support</div>
                            </div>
                        </div>
                        <button class="btn btn-outline" style="width: 100%; margin-top: 15px;">
                            <span>üì±</span> Call or Text
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h2>üì§ Share Progress Update</h2>
                    <p style="margin-bottom: 20px; color: var(--text-medium);">
                        Keep your care team informed about how you're doing. Choose what to share.
                    </p>

                    <h3>What would you like to share?</h3>
                    <div class="checklist">
                        <div class="checklist-item" onclick="toggleChecklistItem(this)">
                            <div class="checkbox"></div>
                            <div class="checklist-label">My mood trends this week</div>
                        </div>
                        <div class="checklist-item" onclick="toggleChecklistItem(this)">
                            <div class="checkbox"></div>
                            <div class="checklist-label">Medication adherence rate</div>
                        </div>
                        <div class="checklist-item" onclick="toggleChecklistItem(this)">
                            <div class="checkbox"></div>
                            <div class="checklist-label">Activities completed</div>
                        </div>
                        <div class="checklist-item" onclick="toggleChecklistItem(this)">
                            <div class="checkbox"></div>
                            <div class="checklist-label">Challenge progress</div>
                        </div>
                        <div class="checklist-item" onclick="toggleChecklistItem(this)">
                            <div class="checkbox"></div>
                            <div class="checklist-label">Notes for therapist</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Optional Message</label>
                        <textarea class="form-textarea" placeholder="Add a personal message..."></textarea>
                    </div>

                    <button class="btn btn-success btn-full">
                        <span>üì§</span> Send Update
                    </button>
                </div>
            </div>

            <div class="card">
                <h2>üìã Caregiver Guidance</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Information and tips for your care partner to best support you.
                </p>

                <div class="grid-2">
                    <div class="education-card" onclick="openCaregiverGuide('support')">
                        <div class="education-header">
                            <div class="education-icon">üíö</div>
                            <div class="education-title">How to Support Me</div>
                            <div class="education-subtitle">For care partners</div>
                        </div>
                        <div class="education-body">
                            <p style="color: var(--text-medium);">
                                What helps most, what to avoid, and how to check in
                            </p>
                        </div>
                    </div>

                    <div class="education-card" onclick="openCaregiverGuide('crisis')">
                        <div class="education-header">
                            <div class="education-icon">üÜò</div>
                            <div class="education-title">Crisis Response Plan</div>
                            <div class="education-subtitle">Emergency protocols</div>
                        </div>
                        <div class="education-body">
                            <p style="color: var(--text-medium);">
                                Warning signs and what to do in a crisis
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Section -->
        <div id="progress" class="section">
            <div class="card">
                <h2>üìà Your Progress</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Track your journey and see how far you've come!
                </p>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-box-value">7</div>
                        <div class="stat-box-label">Day Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">86%</div>
                        <div class="stat-box-label">Medication</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">42</div>
                        <div class="stat-box-label">Activities</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">15</div>
                        <div class="stat-box-label">Check-ins</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h2>üòä Mood Trends</h2>
                    <p style="color: var(--text-medium); margin-bottom: 15px;">Your mood over the past 2 weeks</p>
                    <div style="background: var(--bg-main); padding: 30px; border-radius: 10px; text-align: center; min-height: 250px; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                        <div style="font-size: 3em; margin-bottom: 15px;">üìä</div>
                        <p style="color: var(--text-medium);">Your mood chart shows improvement!</p>
                        <p style="color: var(--text-medium); margin-top: 10px;">Average mood: 3.8/5 (up from 3.2 last week)</p>
                    </div>
                </div>

                <div class="card">
                    <h2>üí° Insights</h2>
                    <div class="alert alert-success">
                        <span class="alert-icon">‚ú®</span>
                        <div>
                            <strong>Pattern Detected:</strong> Your mood is consistently better on days when you exercise and complete check-ins early.
                        </div>
                    </div>
                    <div class="alert alert-info">
                        <span class="alert-icon">üíä</span>
                        <div>
                            <strong>Medication Impact:</strong> Since starting your new medication regimen 3 weeks ago, your mood ratings have improved by 18%.
                        </div>
                    </div>
                    <div class="alert alert-warning">
                        <span class="alert-icon">üò¥</span>
                        <div>
                            <strong>Sleep Connection:</strong> Your mood drops when sleep quality is below 6/10. Prioritize sleep hygiene.
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üìã Progress Summary for Therapist</h2>
                <p style="margin-bottom: 20px; color: var(--text-medium);">
                    Here's what you can share at your next session:
                </p>

                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">This Week</div>
                            <strong>Improved mood stability</strong>
                            <p style="color: var(--text-medium); margin-top: 5px;">
                                Mood ratings more consistent, fewer low days
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">This Week</div>
                            <strong>Completed mindfulness challenge</strong>
                            <p style="color: var(--text-medium); margin-top: 5px;">
                                Practiced daily for 5 days, noticed reduced anxiety
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">This Week</div>
                            <strong>Medication adherence at 86%</strong>
                            <p style="color: var(--text-medium); margin-top: 5px;">
                                Missed one evening dose due to late event
                            </p>
                        </div>
                    </div>
                </div>

                <button class="btn btn-outline">
                    <span>üìÑ</span> Generate Full Report
                </button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Activity</div>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // App State
        let appState = {
            user: {
                streak: 7,
                medAdherence: 86,
                activities: 42,
                mood: 'üòä'
            },
            selectedMood: null,
            checkins: [],
            medications: [
                { id: 1, name: 'Sertraline', dose: '50mg', time: 'Morning', taken: true },
                { id: 2, name: 'Quetiapine', dose: '25mg', time: 'Evening', taken: false }
            ],
            activities: [],
            sideEffects: [],
            sessionNotes: []
        };

        // Activities Database
        const activitiesDB = [
            {
                id: 1, icon: 'üå¨Ô∏è', title: '4-7-8 Breathing', category: ['quick', 'anxiety'],
                desc: 'Calm your nervous system in 3 minutes', duration: '3 min',
                steps: ['Exhale completely', 'Inhale for 4 counts', 'Hold for 7 counts', 'Exhale for 8 counts', 'Repeat 4 times']
            },
            {
                id: 2, icon: 'üö∂', title: 'Mindful Walk', category: ['mindfulness', 'mood'],
                desc: 'Get outside and connect with nature', duration: '15 min',
                steps: ['Go outside', 'Notice your surroundings', 'Focus on each step', 'Breathe deeply', 'Return refreshed']
            },
            {
                id: 3, icon: 'üìù', title: 'Gratitude Journal', category: ['quick', 'mood'],
                desc: 'Write 3 things you\'re grateful for', duration: '5 min',
                steps: ['List 3 things', 'Why grateful?', 'How do they make you feel?', 'Reflect']
            },
            {
                id: 4, icon: 'üßò', title: 'Body Scan', category: ['mindfulness', 'anxiety'],
                desc: 'Release tension through awareness', duration: '10 min',
                steps: ['Lie down', 'Close eyes', 'Scan from toes to head', 'Notice sensations', 'Release tension']
            },
            {
                id: 5, icon: 'üë•', title: 'Social Connection', category: ['social', 'mood'],
                desc: 'Reach out to someone you care about', duration: '15 min',
                steps: ['Choose someone', 'Call or meet', 'Share how you\'re doing', 'Listen actively', 'Schedule next time']
            },
            {
                id: 6, icon: 'üí™', title: 'Gentle Exercise', category: ['mood'],
                desc: 'Move your body for mood boost', duration: '20 min',
                steps: ['Choose activity', 'Start slow', 'Notice how you feel', 'Gradually increase', 'Cool down']
            },
            {
                id: 7, icon: 'üéµ', title: 'Music Therapy', category: ['quick', 'mood'],
                desc: 'Use music to shift your mood', duration: '10 min',
                steps: ['Choose music', 'Close eyes and listen', 'Let yourself move', 'Notice mood shift']
            },
            {
                id: 8, icon: 'üßä', title: '5-4-3-2-1 Grounding', category: ['quick', 'anxiety'],
                desc: 'Anchor yourself in the present', duration: '5 min',
                steps: ['5 things you see', '4 things you touch', '3 things you hear', '2 things you smell', '1 thing you taste']
            }
        ];

        // Education Library
        const educationDB = [
            {
                id: 1, icon: 'üß†', title: 'Understanding Depression',
                desc: 'Learn about depression symptoms, causes, and treatment options',
                category: 'condition'
            },
            {
                id: 2, icon: 'üò∞', title: 'Anxiety 101',
                desc: 'What is anxiety, why it happens, and how to manage it',
                category: 'condition'
            },
            {
                id: 3, icon: 'üíä', title: 'Medication Guide',
                desc: 'How psychiatric medications work and what to expect',
                category: 'treatment'
            },
            {
                id: 4, icon: 'üßò', title: 'Mindfulness Skills',
                desc: 'Practical mindfulness techniques for daily life',
                category: 'skills'
            },
            {
                id: 5, icon: 'üò¥', title: 'Sleep Hygiene',
                desc: 'Science-based tips for better sleep',
                category: 'wellness'
            },
            {
                id: 6, icon: 'üçé', title: 'Nutrition & Mental Health',
                desc: 'How diet affects mood and brain function',
                category: 'wellness'
            }
        ];

        // Challenges Database
        const challengesDB = [
            {
                id: 1, icon: 'üåÖ', title: 'Morning Routine Week',
                desc: 'Establish a consistent morning routine for 7 days'
            },
            {
                id: 2, icon: 'üíß', title: 'Hydration Challenge',
                desc: 'Drink 8 glasses of water daily for 7 days'
            },
            {
                id: 3, icon: 'üì±', title: 'Digital Detox',
                desc: 'No screens 1 hour before bed for 7 days'
            },
            {
                id: 4, icon: 'üôè', title: 'Gratitude Practice',
                desc: 'Write 3 gratitudes daily for 7 days'
            }
        ];

        // Initialize
        function init() {
            renderTodayTodos();
            renderSessionPrep();
            renderTodayMedications();
            renderWeeklyMedicationGrid();
            renderActivitiesList();
            renderEducationLibrary();
            renderChallengesList();
            renderWeekMoodChart();
        }

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        // Mood Selection
        function selectMood(value, element) {
            document.querySelectorAll('.mood-option').forEach(m => m.classList.remove('selected'));
            element.classList.add('selected');
            appState.selectedMood = value;
        }

        // Toggle Checklist
        function toggleChecklistItem(item) {
            item.classList.toggle('checked');
            const checkbox = item.querySelector('.checkbox');
            checkbox.innerHTML = item.classList.contains('checked') ? '‚úì' : '';
        }

        // Save Check-in
        function saveCheckin() {
            if (!appState.selectedMood) {
                alert('Please select your mood first!');
                return;
            }

            const checkin = {
                date: new Date().toISOString(),
                mood: appState.selectedMood,
                sleep: document.getElementById('sleepQuality').value,
                energy: document.getElementById('energyLevel').value,
                stress: document.getElementById('stressLevel').value,
                heartRate: document.getElementById('heartRate').value,
                steps: document.getElementById('steps').value,
                note: document.getElementById('checkinNote').value
            };

            appState.checkins.push(checkin);
            saveData();

            showModal('Check-In Complete!', `
                <div style="text-align: center;">
                    <div style="font-size: 5em; margin-bottom: 20px;">üéâ</div>
                    <h2>Great job checking in!</h2>
                    <p style="margin: 20px 0;">Your daily check-in has been saved.</p>
                    <p>Keep building that streak! üî•</p>
                    <button class="btn btn-success btn-full" style="margin-top: 25px;" onclick="closeModal()">
                        Continue
                    </button>
                </div>
            `);
        }

        // Medication Functions
        function takeMedication(id) {
            const med = appState.medications.find(m => m.id === id);
            if (med) {
                med.taken = !med.taken;
                renderTodayMedications();
                saveData();
            }
        }

        function addMedication() {
            showModal('Add Medication', `
                <div class="form-group">
                    <label class="form-label">Medication Name</label>
                    <input type="text" class="form-input" id="newMedName" placeholder="e.g., Sertraline">
                </div>
                <div class="form-group">
                    <label class="form-label">Dosage</label>
                    <input type="text" class="form-input" id="newMedDose" placeholder="e.g., 50mg">
                </div>
                <div class="form-group">
                    <label class="form-label">Time</label>
                    <select class="form-select" id="newMedTime">
                        <option>Morning</option>
                        <option>Afternoon</option>
                        <option>Evening</option>
                        <option>Bedtime</option>
                    </select>
                </div>
                <button class="btn btn-success btn-full" onclick="saveMedication()">
                    Add Medication
                </button>
            `);
        }

        function saveMedication() {
            const med = {
                id: Date.now(),
                name: document.getElementById('newMedName').value,
                dose: document.getElementById('newMedDose').value,
                time: document.getElementById('newMedTime').value,
                taken: false
            };
            appState.medications.push(med);
            renderTodayMedications();
            saveData();
            closeModal();
        }

        function reportSideEffect() {
            showModal('Report Side Effect', `
                <div class="form-group">
                    <label class="form-label">Which medication?</label>
                    <select class="form-select" id="seMedication">
                        ${appState.medications.map(m => `<option>${m.name}</option>`).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Side effect</label>
                    <input type="text" class="form-input" id="seSideEffect" placeholder="e.g., Nausea, Fatigue">
                </div>
                <div class="form-group">
                    <label class="form-label">Severity (1-10)</label>
                    <input type="range" class="form-input" id="seSeverity" min="1" max="10" value="5">
                    <div style="text-align: center; margin-top: 8px;">
                        <span id="seSeverityValue">5</span>/10
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Additional details</label>
                    <textarea class="form-textarea" id="seDetails"></textarea>
                </div>
                <button class="btn btn-success btn-full" onclick="saveSideEffect()">
                    Report Side Effect
                </button>
            `);

            document.getElementById('seSeverity').oninput = function() {
                document.getElementById('seSeverityValue').textContent = this.value;
            };
        }

        function saveSideEffect() {
            const se = {
                id: Date.now(),
                date: new Date().toISOString(),
                medication: document.getElementById('seMedication').value,
                sideEffect: document.getElementById('seSideEffect').value,
                severity: document.getElementById('seSeverity').value,
                details: document.getElementById('seDetails').value
            };
            appState.sideEffects.push(se);
            saveData();
            closeModal();
            alert('Side effect reported. Your doctor will be notified.');
        }

        // Activity Functions
        function filterActivities(category) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderActivitiesList(category);
        }

        function startActivity(id) {
            const activity = activitiesDB.find(a => a.id === id);
            if (!activity) return;

            showModal(activity.title, `
                <div style="text-align: center; margin-bottom: 25px;">
                    <div style="font-size: 5em;">${activity.icon}</div>
                    <h2 style="margin-top: 15px;">${activity.title}</h2>
                    <p style="color: var(--text-medium);">${activity.duration} ‚Ä¢ ${activity.desc}</p>
                </div>

                <h3>Steps:</h3>
                <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 15px;">
                    ${activity.steps.map((step, i) => `
                        <div style="display: flex; gap: 15px;">
                            <div style="min-width: 30px; height: 30px; background: var(--primary); color: white;
                                        border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                        font-weight: bold;">${i + 1}</div>
                            <div style="padding-top: 5px;">${step}</div>
                        </div>
                    `).join('')}
                </div>

                <button class="btn btn-success btn-full" style="margin-top: 25px;" onclick="completeActivity(${id})">
                    <span>‚úÖ</span> Mark as Complete
                </button>
            `);
        }

        function completeActivity(id) {
            appState.activities.push({ id: id, date: new Date().toISOString() });
            appState.user.activities++;
            saveData();

            showModal('Activity Complete!', `
                <div style="text-align: center;">
                    <div style="font-size: 5em; margin-bottom: 20px;">üéâ</div>
                    <h2>Great work!</h2>
                    <p style="margin: 20px 0;">You completed the activity!</p>
                    <button class="btn btn-success btn-full" style="margin-top: 25px;" onclick="closeModal()">
                        Continue
                    </button>
                </div>
            `);
        }

        // Session Note
        function addSessionNote() {
            showModal('Note for Therapist', `
                <p style="margin-bottom: 15px; color: var(--text-medium);">
                    Add something you want to discuss at your next session.
                </p>
                <div class="form-group">
                    <textarea class="form-textarea" id="sessionNote" rows="6"
                              placeholder="What do you want to talk about with your therapist?"></textarea>
                </div>
                <button class="btn btn-success btn-full" onclick="saveSessionNote()">
                    Add Note
                </button>
            `);
        }

        function saveSessionNote() {
            const note = document.getElementById('sessionNote').value;
            if (note.trim()) {
                appState.sessionNotes.push({
                    date: new Date().toISOString(),
                    note: note
                });
                saveData();
                renderSessionPrep();
                closeModal();
            }
        }

        // Crisis Help
        function showCrisisHelp() {
            showModal('Crisis Resources', `
                <div class="alert alert-danger">
                    <span class="alert-icon">üö®</span>
                    <div><strong>If you're in immediate danger, call 911</strong></div>
                </div>

                <h3 style="margin-top: 25px;">24/7 Crisis Support:</h3>

                <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                    <div style="background: var(--bg-main); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2em; margin-bottom: 10px;">üìû</div>
                        <strong>988 Suicide & Crisis Lifeline</strong>
                        <div style="color: var(--text-medium); margin-top: 5px;">Call or text 988</div>
                    </div>

                    <div style="background: var(--bg-main); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2em; margin-bottom: 10px;">üí¨</div>
                        <strong>Crisis Text Line</strong>
                        <div style="color: var(--text-medium); margin-top: 5px;">Text HOME to 741741</div>
                    </div>
                </div>

                <button class="btn btn-full" style="margin-top: 25px;" onclick="closeModal()">
                    Close
                </button>
            `);
        }

        // Render Functions
        function renderTodayTodos() {
            const container = document.getElementById('todayTodos');
            container.innerHTML = `
                <div class="checklist-item">
                    <div class="checkbox">‚úì</div>
                    <div class="checklist-label">Complete daily check-in</div>
                </div>
                <div class="checklist-item">
                    <div class="checkbox"></div>
                    <div class="checklist-label">Take morning medications</div>
                </div>
                <div class="checklist-item">
                    <div class="checkbox"></div>
                    <div class="checklist-label">Practice mindfulness (5 min)</div>
                </div>
            `;
        }

        function renderSessionPrep() {
            const container = document.getElementById('sessionPrep');
            container.innerHTML = appState.sessionNotes.map(n => `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">${new Date(n.date).toLocaleDateString()}</div>
                        <p style="color: var(--text-dark);">${n.note}</p>
                    </div>
                </div>
            `).join('') || '<p style="color: var(--text-medium);">No notes yet. Add topics you want to discuss!</p>';
        }

        function renderTodayMedications() {
            const container = document.getElementById('todayMedications');
            container.innerHTML = appState.medications.map(med => `
                <div class="medication-item">
                    <div class="medication-info">
                        <div class="medication-name">${med.name}</div>
                        <div class="medication-details">${med.dose} ‚Ä¢ ${med.time}</div>
                    </div>
                    <div class="medication-actions">
                        <div class="med-taken ${med.taken ? '' : 'pending'}" onclick="takeMedication(${med.id})">
                            ${med.taken ? '‚úì' : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderWeeklyMedicationGrid() {
            const container = document.getElementById('weeklyMedicationGrid');
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            container.innerHTML = days.map((day, i) => {
                const taken = i < 6;
                return `
                    <div class="stat-box" style="border-color: ${taken ? 'var(--secondary)' : 'var(--border)'};">
                        <div style="color: var(--text-medium); margin-bottom: 10px;">${day}</div>
                        <div style="font-size: 2em;">${taken ? '‚úÖ' : '‚≠ï'}</div>
                    </div>
                `;
            }).join('');
        }

        function renderActivitiesList(filter = 'all') {
            const container = document.getElementById('activitiesList');
            let filtered = activitiesDB;

            if (filter !== 'all') {
                filtered = activitiesDB.filter(a => a.category.includes(filter));
            }

            container.innerHTML = filtered.map(a => `
                <div class="activity-card" onclick="startActivity(${a.id})">
                    <div class="activity-icon">${a.icon}</div>
                    <div class="activity-title">${a.title}</div>
                    <div class="activity-desc">${a.desc}</div>
                    <div class="activity-meta">
                        <div class="badge badge-primary">${a.duration}</div>
                    </div>
                </div>
            `).join('');
        }

        function renderEducationLibrary() {
            const container = document.getElementById('educationLibrary');
            container.innerHTML = educationDB.map(ed => `
                <div class="education-card" onclick="openEducation(${ed.id})">
                    <div class="education-header">
                        <div class="education-icon">${ed.icon}</div>
                        <div class="education-title">${ed.title}</div>
                    </div>
                    <div class="education-body">
                        <p style="color: var(--text-medium);">${ed.desc}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderChallengesList() {
            const container = document.getElementById('challengesList');
            container.innerHTML = challengesDB.map(ch => `
                <div class="activity-card" onclick="startChallenge(${ch.id})">
                    <div class="activity-icon">${ch.icon}</div>
                    <div class="activity-title">${ch.title}</div>
                    <div class="activity-desc">${ch.desc}</div>
                </div>
            `).join('');
        }

        function renderWeekMoodChart() {
            const container = document.getElementById('weekMoodChart');
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const moods = ['üòä', 'üòÑ', 'üòê', 'üôÇ', 'üòä', 'üôÇ', 'üòä'];
            container.innerHTML = days.map((day, i) => `
                <div class="stat-box">
                    <div class="stat-box-value">${moods[i]}</div>
                    <div class="stat-box-label">${day}</div>
                </div>
            `).join('');
        }

        // Modal Functions
        function showModal(title, body) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = body;
            document.getElementById('modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) closeModal();
        }

        // Data Management
        function saveData() {
            localStorage.setItem('mindcareConnectData', JSON.stringify(appState));
        }

        function loadData() {
            const saved = localStorage.getItem('mindcareConnectData');
            if (saved) {
                const data = JSON.parse(saved);
                appState = { ...appState, ...data };
            }
        }

        // Placeholder functions
        function openEducation(id) {
            alert('This would open the education module with interactive content.');
        }

        function startChallenge(id) {
            alert('This would start the weekly challenge with daily check-ins.');
        }

        function watchVideo(id) {
            alert('This would play the educational video.');
        }

        function openCaregiverGuide(type) {
            alert('This would open guidance for caregivers on how to support you.');
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            init();
        });
    </script>
</body>
</html>
