<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - Your Mental Wellness Companion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Core Colors */
            --primary: #6B9BD1;
            --primary-light: #8FB5DC;
            --primary-dark: #4A7DB0;
            --secondary: #A8D5BA;
            --secondary-light: #C2E3CE;
            --secondary-dark: #8EC1A4;
            --accent: #FFB6B9;
            --accent-light: #FFCFD1;
            --accent-dark: #FF9DA1;

            /* Background Colors */
            --bg-light: #F8F9FA;
            --bg-card: #FFFFFF;
            --bg-overlay: rgba(0, 0, 0, 0.5);

            /* Text Colors */
            --text-dark: #2C3E50;
            --text-light: #6C757D;
            --text-muted: #95A5A6;

            /* Semantic Colors */
            --success: #7FCB9F;
            --warning: #FFD93D;
            --danger: #FF6B6B;
            --info: #6B9BD1;

            /* Glassmorphism */
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.18);
            --backdrop-blur: blur(10px);

            /* Shadows */
            --shadow-1: 0 2px 10px rgba(0, 0, 0, 0.08);
            --shadow-2: 0 4px 20px rgba(0, 0, 0, 0.12);
            --shadow-3: 0 8px 30px rgba(0, 0, 0, 0.15);
            --shadow-4: 0 12px 40px rgba(0, 0, 0, 0.18);
            --shadow-5: 0 16px 50px rgba(0, 0, 0, 0.22);
            --shadow: var(--shadow-1);
            --shadow-hover: var(--shadow-2);

            /* Typography - Fluid Responsive */
            --font-size-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
            --font-size-sm: clamp(0.875rem, 0.8rem + 0.35vw, 1rem);
            --font-size-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
            --font-size-lg: clamp(1.125rem, 1rem + 0.65vw, 1.375rem);
            --font-size-xl: clamp(1.375rem, 1.2rem + 0.85vw, 1.75rem);
            --font-size-2xl: clamp(1.75rem, 1.5rem + 1.25vw, 2.25rem);
            --font-size-3xl: clamp(2.25rem, 1.9rem + 1.75vw, 3rem);

            /* Spacing Scale */
            --spacing-xs: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
            --spacing-sm: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
            --spacing-md: clamp(1rem, 0.8rem + 1vw, 1.5rem);
            --spacing-lg: clamp(1.5rem, 1.2rem + 1.5vw, 2.5rem);
            --spacing-xl: clamp(2rem, 1.5rem + 2.5vw, 4rem);

            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            --radius-full: 9999px;

            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-spring: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

            /* Z-index Scale */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
        }

        /* Dark Mode Theme */
        [data-theme="dark"] {
            /* Core Colors - Adjusted for dark mode */
            --primary: #8FB5DC;
            --primary-light: #A9C7E6;
            --primary-dark: #6B9BD1;
            --secondary: #8EC1A4;
            --secondary-light: #A8D5BA;
            --secondary-dark: #74AD8A;
            --accent: #FFCFD1;
            --accent-light: #FFE5E6;
            --accent-dark: #FFB6B9;

            /* Background Colors */
            --bg-light: #1A1F2E;
            --bg-card: #242938;
            --bg-overlay: rgba(0, 0, 0, 0.7);

            /* Text Colors */
            --text-dark: #E8EBF0;
            --text-light: #B0B8C8;
            --text-muted: #7D8599;

            /* Glassmorphism - Dark */
            --glass-bg: rgba(36, 41, 56, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);

            /* Shadows - Enhanced for dark mode */
            --shadow-1: 0 2px 10px rgba(0, 0, 0, 0.3);
            --shadow-2: 0 4px 20px rgba(0, 0, 0, 0.4);
            --shadow-3: 0 8px 30px rgba(0, 0, 0, 0.5);
            --shadow-4: 0 12px 40px rgba(0, 0, 0, 0.6);
            --shadow-5: 0 16px 50px rgba(0, 0, 0, 0.7);
        }

        /* Accessibility - Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --shadow-1: 0 0 0 2px currentColor;
                --shadow-2: 0 0 0 3px currentColor;
            }
        }

        /* Screen Reader Only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Skip Link for Keyboard Navigation */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 var(--radius-md) 0;
            z-index: var(--z-tooltip);
            transition: top var(--transition-fast);
        }

        .skip-link:focus {
            top: 0;
        }

        /* Enhanced Focus States */
        *:focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background:
                radial-gradient(circle at 20% 50%, rgba(107, 155, 209, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(168, 213, 186, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 182, 185, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #E8F5E9 0%, #E3F2FD 100%);
            color: var(--text-dark);
            min-height: 100vh;
            transition: background var(--transition-slow), color var(--transition-slow);
            position: relative;
        }

        [data-theme="dark"] body {
            background:
                radial-gradient(circle at 20% 50%, rgba(107, 155, 209, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(168, 213, 186, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 182, 185, 0.06) 0%, transparent 50%),
                linear-gradient(135deg, #0F1419 0%, #1A1F2E 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            box-shadow: var(--shadow-2);
            padding: 20px 0;
            margin-bottom: 30px;
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
            border: 1px solid var(--glass-border);
            border-top: none;
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
        }

        /* Fallback for browsers without backdrop-filter */
        @supports not (backdrop-filter: blur(10px)) {
            header {
                background: var(--bg-card);
            }
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-greeting {
            color: var(--text-light);
            font-size: 0.95em;
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            background: var(--bg-light);
            border: 2px solid var(--glass-border);
            border-radius: var(--radius-full);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            font-size: 1.5em;
            box-shadow: var(--shadow);
        }

        .dark-mode-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: var(--shadow-hover);
        }

        .dark-mode-toggle:active {
            transform: scale(0.95);
        }

        [data-theme="dark"] .dark-mode-toggle .theme-icon::before {
            content: '‚òÄÔ∏è';
        }

        .theme-icon::before {
            content: 'üåô';
        }

        /* Navigation - Mobile First (Bottom Bar) */
        nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            padding: 8px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            border-top: 1px solid var(--glass-border);
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 4px;
            z-index: var(--z-fixed);
        }

        @supports not (backdrop-filter: blur(10px)) {
            nav {
                background: var(--bg-card);
            }
        }

        .nav-btn {
            background: transparent;
            color: var(--text-light);
            border: none;
            padding: 8px 4px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-xs);
            font-weight: 600;
            transition: all var(--transition-base);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            min-height: 64px;
            position: relative;
        }

        .nav-btn::before {
            content: attr(data-icon);
            font-size: 1.5em;
        }

        .nav-btn:hover {
            color: var(--primary);
            background: rgba(107, 155, 209, 0.1);
        }

        .nav-btn.active {
            color: var(--primary);
            background: linear-gradient(135deg, rgba(107, 155, 209, 0.2), rgba(168, 213, 186, 0.2));
        }

        .nav-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 32px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: var(--radius-full);
        }

        /* Add padding to container for mobile bottom nav */
        .container {
            padding-bottom: 100px;
        }

        /* Desktop Navigation (Sidebar) */
        @media (min-width: 1024px) {
            body {
                display: grid;
                grid-template-columns: 280px 1fr;
                grid-template-rows: auto 1fr;
                grid-template-areas:
                    "header header"
                    "nav main";
                gap: 0;
            }

            header {
                grid-area: header;
                border-radius: 0;
                margin-bottom: 0;
            }

            nav {
                grid-area: nav;
                position: sticky;
                top: 80px;
                left: 0;
                bottom: auto;
                height: fit-content;
                max-height: calc(100vh - 100px);
                display: flex;
                flex-direction: column;
                gap: 8px;
                padding: 20px;
                border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
                border-top: none;
                border-left: none;
                box-shadow: var(--shadow-2);
                margin: 20px 0 20px 0;
            }

            .container {
                grid-area: main;
                padding-bottom: 20px;
            }

            .nav-btn {
                flex-direction: row;
                justify-content: flex-start;
                padding: 12px 16px;
                gap: 12px;
                min-height: auto;
                font-size: var(--font-size-base);
                text-align: left;
                position: relative;
            }

            .nav-btn::before {
                font-size: 1.5em;
                flex-shrink: 0;
            }

            .nav-btn.active::after {
                content: '';
                position: absolute;
                left: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 4px;
                height: 70%;
                background: linear-gradient(180deg, var(--primary), var(--secondary));
                border-radius: 0 var(--radius-full) var(--radius-full) 0;
            }

            .nav-btn:hover {
                transform: translateX(4px);
            }
        }

        .section {
            display: none;
            contain: layout style paint;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Performance Optimizations */
        .card,
        .module-card,
        .mood-btn,
        .nav-btn,
        .breathing-circle {
            will-change: transform;
            transform: translateZ(0);
        }

        .circular-progress {
            will-change: --progress;
        }

        /* Loading States & Skeleton Screens */
        .skeleton {
            background: linear-gradient(90deg,
                var(--bg-light) 25%,
                var(--bg-card) 50%,
                var(--bg-light) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--radius-md);
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 16px;
            margin-bottom: 8px;
            border-radius: var(--radius-sm);
        }

        .skeleton-text:last-child {
            width: 60%;
        }

        .skeleton-title {
            height: 24px;
            width: 40%;
            margin-bottom: 16px;
            border-radius: var(--radius-md);
        }

        .skeleton-card {
            padding: 25px;
            border-radius: var(--radius-lg);
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--glass-border);
            margin-bottom: 20px;
        }

        .skeleton-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }

        /* Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg-overlay);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--transition-base);
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-text {
            color: white;
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-top: 16px;
        }

        .card {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-2);
            margin-bottom: 20px;
            transition: all var(--transition-base);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            opacity: 0;
            transition: opacity var(--transition-base);
        }

        .card:hover {
            box-shadow: var(--shadow-3);
            transform: translateY(-4px);
        }

        .card:hover::before {
            opacity: 1;
        }

        /* Fallback for browsers without backdrop-filter */
        @supports not (backdrop-filter: blur(10px)) {
            .card {
                background: var(--bg-card);
            }
        }

        .card-title {
            font-size: var(--font-size-xl);
            margin-bottom: 15px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .mood-tracker {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .mood-btn {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border: 3px solid transparent;
            padding: 20px;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-spring);
            font-size: 2em;
            min-width: 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-1);
        }

        .mood-btn:hover {
            transform: scale(1.15) rotate(-3deg);
            border-color: var(--primary);
            box-shadow: var(--shadow-3);
        }

        .mood-btn.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transform: scale(1.2) rotate(5deg);
            box-shadow: var(--shadow-4);
            animation: moodPulse 2s ease-in-out infinite;
        }

        @keyframes moodPulse {
            0%, 100% {
                box-shadow: var(--shadow-4);
            }
            50% {
                box-shadow: var(--shadow-5), 0 0 20px rgba(107, 155, 209, 0.5);
            }
        }

        .mood-label {
            display: block;
            font-size: 0.4em;
            margin-top: 8px;
            color: var(--text-dark);
            font-weight: 600;
        }

        /* Ripple Effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: rippleAnimation 600ms ease-out;
            pointer-events: none;
        }

        @keyframes rippleAnimation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Enhanced Button Interactions */
        button, .btn, .module-card, .achievement {
            position: relative;
            overflow: hidden;
        }

        /* Circular Progress Indicators */
        .circular-progress-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .circular-progress-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 20px;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: var(--radius-lg);
            border: 1px solid var(--glass-border);
            transition: all var(--transition-base);
        }

        .circular-progress-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-3);
        }

        .circular-progress {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary) calc(var(--progress, 0) * 1%),
                var(--bg-light) 0
            );
            display: flex;
            align-items: center;
            justify-content: center;
            transition: --progress 1s ease-out;
        }

        @property --progress {
            syntax: '<number>';
            inherits: false;
            initial-value: 0;
        }

        .circular-progress::before {
            content: '';
            position: absolute;
            inset: 8px;
            border-radius: 50%;
            background: var(--bg-card);
        }

        .circular-progress-value {
            position: relative;
            z-index: 1;
            font-size: var(--font-size-xl);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .circular-progress-label {
            font-size: var(--font-size-sm);
            color: var(--text-light);
            font-weight: 600;
            text-align: center;
        }

        .circular-progress-description {
            font-size: var(--font-size-xs);
            color: var(--text-muted);
            text-align: center;
        }

        .progress-bar {
            background: var(--bg-light);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            height: 100%;
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .achievements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .achievement {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, var(--success), var(--secondary));
            color: white;
            border-color: var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .achievement-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .achievement-name {
            font-weight: 600;
            font-size: 0.9em;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .module-card {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-2);
            cursor: pointer;
            transition: all var(--transition-spring);
            border: 2px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform var(--transition-base);
        }

        .module-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-4);
            border-color: var(--primary);
        }

        .module-card:hover::before {
            transform: scaleX(1);
        }

        .module-card.completed {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(127, 203, 159, 0.2), rgba(168, 213, 186, 0.2));
        }

        .module-card.completed::before {
            transform: scaleX(1);
            background: linear-gradient(90deg, var(--success), var(--secondary));
        }

        .module-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .module-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .module-time {
            color: var(--text-light);
            font-size: 0.85em;
            margin-top: 10px;
        }

        .crisis-button {
            background: linear-gradient(135deg, var(--danger), var(--accent));
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: var(--radius-xl);
            font-size: var(--font-size-lg);
            font-weight: 600;
            cursor: pointer;
            box-shadow: var(--shadow-3);
            transition: all var(--transition-spring);
            width: 100%;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .crisis-button:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-4);
            background: linear-gradient(135deg, var(--accent), var(--danger));
        }

        .crisis-button:active {
            transform: scale(0.98);
        }

        .breathing-exercise {
            text-align: center;
            padding: 40px;
        }

        /* Fullscreen Breathing Experience */
        .breathing-fullscreen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg,
                rgba(26, 31, 46, 0.98) 0%,
                rgba(15, 20, 25, 0.98) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--transition-slow);
        }

        .breathing-fullscreen.active {
            opacity: 1;
            pointer-events: all;
        }

        .breathing-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%,
                var(--primary-light),
                var(--primary),
                var(--primary-dark));
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-2xl);
            font-weight: 600;
            box-shadow:
                0 0 40px rgba(107, 155, 209, 0.6),
                0 0 80px rgba(107, 155, 209, 0.4),
                0 0 120px rgba(107, 155, 209, 0.2),
                inset 0 0 40px rgba(255, 255, 255, 0.1);
            transition: all 4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            will-change: transform;
        }

        .breathing-circle::before {
            content: '';
            position: absolute;
            inset: -20px;
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(107, 155, 209, 0.3) 0%,
                transparent 70%);
            animation: breathingGlow 4s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes breathingGlow {
            0%, 100% { opacity: 0; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .breathing-circle.inhale {
            transform: scale(1.5);
            box-shadow:
                0 0 60px rgba(107, 155, 209, 0.8),
                0 0 120px rgba(107, 155, 209, 0.6),
                0 0 180px rgba(107, 155, 209, 0.4);
        }

        .breathing-circle.inhale::before {
            animation-play-state: running;
        }

        .breathing-circle.exhale {
            transform: scale(1);
        }

        .breathing-instruction {
            font-size: var(--font-size-xl);
            color: var(--text-dark);
            margin-bottom: 40px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        [data-theme="dark"] .breathing-instruction {
            color: var(--text-light);
        }

        .breathing-counter {
            font-size: var(--font-size-lg);
            color: var(--text-light);
            margin-top: 40px;
        }

        .breathing-progress-bar {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-full);
            margin-top: 20px;
            overflow: hidden;
        }

        .breathing-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: var(--radius-full);
            transition: width 16s linear;
            width: 0%;
        }

        .breathing-exit-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .breathing-exit-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* Enhanced Forms with Floating Labels */
        .form-group {
            position: relative;
            margin-bottom: 24px;
        }

        .form-label {
            position: absolute;
            left: 16px;
            top: 16px;
            color: var(--text-light);
            font-size: var(--font-size-base);
            pointer-events: none;
            transition: all var(--transition-base);
            background: var(--bg-card);
            padding: 0 4px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--glass-border);
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: var(--font-size-base);
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            color: var(--text-dark);
            transition: all var(--transition-base);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(107, 155, 209, 0.15);
        }

        .form-input:focus + .form-label,
        .form-textarea:focus + .form-label,
        .form-input:not(:placeholder-shown) + .form-label,
        .form-textarea:not(:placeholder-shown) + .form-label {
            top: -10px;
            left: 12px;
            font-size: var(--font-size-xs);
            color: var(--primary);
            font-weight: 600;
        }

        .character-counter {
            text-align: right;
            font-size: var(--font-size-xs);
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Enhanced Journal Entries */
        .journal-entry {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            padding: 20px;
            border-radius: var(--radius-lg);
            margin: 15px 0;
            border-left: 4px solid var(--primary);
            border: 1px solid var(--glass-border);
            border-left: 4px solid var(--primary);
            transition: all var(--transition-base);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .journal-entry:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-3);
            border-left-width: 6px;
        }

        .journal-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .journal-date {
            color: var(--text-light);
            font-size: var(--font-size-sm);
            font-weight: 600;
        }

        .journal-delete {
            background: rgba(255, 107, 107, 0.1);
            color: var(--danger);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-base);
            opacity: 0;
        }

        .journal-entry:hover .journal-delete {
            opacity: 1;
        }

        .journal-delete:hover {
            background: var(--danger);
            color: white;
            transform: rotate(90deg);
        }

        .journal-content {
            color: var(--text-dark);
            line-height: 1.6;
            max-height: 4.8em;
            overflow: hidden;
            position: relative;
        }

        .journal-content.expanded {
            max-height: none;
        }

        .journal-expand {
            color: var(--primary);
            font-size: var(--font-size-sm);
            font-weight: 600;
            margin-top: 8px;
            display: inline-block;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 16px;
            opacity: 0.5;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .empty-state-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }

        .empty-state-description {
            font-size: var(--font-size-sm);
        }

        /* Legacy textarea support */
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--bg-light);
            border-radius: 15px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            min-height: 120px;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(107, 155, 209, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            margin-top: 15px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-light));
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-light);
            margin-top: 10px;
            font-size: 0.9em;
        }

        .quick-tips {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            color: white;
        }

        .tip-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .caregiver-section {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            padding: 30px;
            border-radius: 20px;
            color: white;
            margin: 20px 0;
        }

        .connection-status {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .close-modal {
            float: right;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-light);
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: var(--danger);
            transform: rotate(90deg);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: var(--shadow-hover);
            z-index: 2000;
            animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s;
            display: none;
        }

        .notification.show {
            display: block;
        }

        @keyframes slideInRight {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(400px); }
        }

        .checkin-prompt {
            background: linear-gradient(135deg, var(--warning), var(--accent));
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .resources-list {
            list-style: none;
        }

        .resources-list li {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .resources-list li:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .nav {
                flex-direction: column;
            }

            .modules-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header>
        <div class="header-content">
            <div class="logo">MindCare</div>
            <div class="user-greeting" id="greeting">Welcome back</div>
            <button class="dark-mode-toggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode">
                <span class="theme-icon">üåô</span>
            </button>
        </div>
    </header>

    <div class="container" id="main-content">
        <nav>
            <button class="nav-btn active" data-icon="üìä" onclick="showSection('dashboard')">Dashboard</button>
            <button class="nav-btn" data-icon="üìö" onclick="showSection('learn')">Learn</button>
            <button class="nav-btn" data-icon="üßò" onclick="showSection('exercises')">Exercises</button>
            <button class="nav-btn" data-icon="üìà" onclick="showSection('progress')">Progress</button>
            <button class="nav-btn" data-icon="üìî" onclick="showSection('journal')">Journal</button>
            <button class="nav-btn" data-icon="ü§ù" onclick="showSection('connect')">Connect</button>
        </nav>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section active">
            <div class="checkin-prompt">
                <h2>How are you feeling today?</h2>
                <p style="margin-top: 10px;">Taking a moment to check in with yourself is an act of self-care.</p>
            </div>

            <div class="card">
                <div class="card-title">Daily Mood Check-In</div>
                <div class="mood-tracker">
                    <button class="mood-btn" onclick="trackMood('amazing', 'üòÑ')">
                        üòÑ<span class="mood-label">Amazing</span>
                    </button>
                    <button class="mood-btn" onclick="trackMood('good', 'üôÇ')">
                        üôÇ<span class="mood-label">Good</span>
                    </button>
                    <button class="mood-btn" onclick="trackMood('okay', 'üòê')">
                        üòê<span class="mood-label">Okay</span>
                    </button>
                    <button class="mood-btn" onclick="trackMood('struggling', 'üòî')">
                        üòî<span class="mood-label">Struggling</span>
                    </button>
                    <button class="mood-btn" onclick="trackMood('crisis', 'üò∞')">
                        üò∞<span class="mood-label">Crisis</span>
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Your Progress Today</div>
                <div class="circular-progress-wrapper">
                    <div class="circular-progress-card" id="lessons-progress">
                        <div class="circular-progress">
                            <div class="circular-progress-value">0</div>
                        </div>
                        <div class="circular-progress-label">Lessons</div>
                        <div class="circular-progress-description" id="lessonsCompleted">0 / 10 completed</div>
                    </div>
                    <div class="circular-progress-card" id="minutes-progress">
                        <div class="circular-progress">
                            <div class="circular-progress-value">0</div>
                        </div>
                        <div class="circular-progress-label">Minutes</div>
                        <div class="circular-progress-description" id="minutesPracticed">0 / 120 today</div>
                    </div>
                    <div class="circular-progress-card" id="exercises-progress">
                        <div class="circular-progress">
                            <div class="circular-progress-value">0</div>
                        </div>
                        <div class="circular-progress-label">Exercises</div>
                        <div class="circular-progress-description">0 / 20 this week</div>
                    </div>
                    <div class="circular-progress-card">
                        <div class="circular-progress" style="--progress: 100;">
                            <div class="circular-progress-value" id="streakCount">0</div>
                        </div>
                        <div class="circular-progress-label">Day Streak</div>
                        <div class="circular-progress-description">Keep it going!</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Today's Personalized Tips</div>
                <div class="quick-tips">
                    <div id="dailyTip">
                        <span class="tip-icon">üí°</span>
                        <span>Remember: Progress isn't always linear. Every small step counts.</span>
                    </div>
                </div>
            </div>

            <button class="crisis-button" onclick="showCrisisSupport()">
                üÜò Need Immediate Support?
            </button>
        </div>

        <!-- Learn Section -->
        <div id="learn" class="section">
            <div class="card">
                <div class="card-title">Micro-Learning Modules</div>
                <p style="color: var(--text-light); margin-bottom: 20px;">
                    Brief, actionable lessons designed to fit into your day. Each module takes 5-10 minutes.
                </p>
                <div class="modules-grid" id="modulesContainer"></div>
            </div>
        </div>

        <!-- Exercises Section -->
        <div id="exercises" class="section">
            <div class="card">
                <div class="card-title">Guided Breathing Exercise</div>
                <div class="breathing-exercise">
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        Follow the circle to breathe deeply and mindfully.
                    </p>
                    <div class="breathing-circle" id="breathingCircle">Breathe</div>
                    <button class="btn" id="breathingBtn" onclick="startBreathing()">Start Exercise</button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Quick Grounding Technique</div>
                <p style="margin-bottom: 15px;">The 5-4-3-2-1 Method for Anxiety Relief:</p>
                <ul style="line-height: 2; color: var(--text-dark);">
                    <li>üîµ Name <strong>5 things</strong> you can see</li>
                    <li>üü¢ Name <strong>4 things</strong> you can touch</li>
                    <li>üü° Name <strong>3 things</strong> you can hear</li>
                    <li>üü† Name <strong>2 things</strong> you can smell</li>
                    <li>üî¥ Name <strong>1 thing</strong> you can taste</li>
                </ul>
                <button class="btn" onclick="logActivity('Grounding Exercise')">Mark as Completed</button>
            </div>
        </div>

        <!-- Progress Section -->
        <div id="progress" class="section">
            <div class="card">
                <div class="card-title">Your Journey Progress</div>
                <div style="margin: 20px 0;">
                    <h3 style="color: var(--text-light); margin-bottom: 10px;">Overall Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overallProgress" style="width: 0%">0%</div>
                    </div>
                </div>

                <div class="achievements">
                    <div class="achievement" id="achievement1">
                        <div class="achievement-icon">üå±</div>
                        <div class="achievement-name">First Step</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">Complete first check-in</div>
                    </div>
                    <div class="achievement" id="achievement2">
                        <div class="achievement-icon">üî•</div>
                        <div class="achievement-name">Streak Starter</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">3-day streak</div>
                    </div>
                    <div class="achievement" id="achievement3">
                        <div class="achievement-icon">üìö</div>
                        <div class="achievement-name">Learner</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">Complete 5 modules</div>
                    </div>
                    <div class="achievement" id="achievement4">
                        <div class="achievement-icon">üßò</div>
                        <div class="achievement-name">Mindful</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">10 breathing exercises</div>
                    </div>
                    <div class="achievement" id="achievement5">
                        <div class="achievement-icon">üí™</div>
                        <div class="achievement-name">Resilient</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">7-day streak</div>
                    </div>
                    <div class="achievement" id="achievement6">
                        <div class="achievement-icon">‚≠ê</div>
                        <div class="achievement-name">Champion</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">30-day streak</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Mood Trends</div>
                <div id="moodHistory" style="color: var(--text-light);">
                    Start tracking your mood to see trends over time.
                </div>
            </div>
        </div>

        <!-- Journal Section -->
        <div id="journal" class="section">
            <div class="card">
                <div class="card-title">Reflection Journal</div>
                <p style="color: var(--text-light); margin-bottom: 20px;">
                    A safe space for your thoughts. Write freely without judgment.
                </p>
                <textarea id="journalInput" placeholder="What's on your mind today? How are you feeling?"></textarea>
                <button class="btn" onclick="saveJournal()">Save Entry</button>
            </div>

            <div class="card">
                <div class="card-title">Previous Entries</div>
                <div id="journalEntries">
                    <p style="color: var(--text-light);">Your journal entries will appear here.</p>
                </div>
            </div>
        </div>

        <!-- Connect Section -->
        <div id="connect" class="section">
            <!-- Mode Toggle -->
            <div class="card" style="text-align: center; margin-bottom: 30px;">
                <p style="margin-bottom: 15px; color: var(--text-light);">Select your role:</p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn" id="userModeBtn" onclick="switchMode('user')" style="background: linear-gradient(135deg, var(--primary), var(--secondary));">
                        üë§ I'm Seeking Support
                    </button>
                    <button class="btn" id="caregiverModeBtn" onclick="switchMode('caregiver')" style="background: linear-gradient(135deg, var(--secondary), var(--primary));">
                        ü§ù I'm a Caregiver/Parent
                    </button>
                </div>
            </div>

            <!-- User View -->
            <div id="userView" style="display: block;">
                <div class="caregiver-section">
                    <h2 style="margin-bottom: 15px;">Support Network</h2>
                    <p style="margin-bottom: 20px;">
                        Connect with trusted caregivers who can support your journey. They can view your progress (with your permission) and send encouragement.
                    </p>
                    <div class="connection-status">
                        <p><strong>Connected Supporters:</strong></p>
                        <p id="caregiverList" style="margin-top: 10px;">None yet. Share your connection code to get started.</p>
                    </div>
                    <button class="btn" onclick="shareCaregiverCode()">Share Connection Code</button>
                </div>

                <div class="card">
                    <div class="card-title">Crisis Resources</div>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        Professional help is always available. You're not alone.
                    </p>
                    <ul class="resources-list">
                        <li onclick="alert('National Suicide Prevention Lifeline: 988')">
                            üìû <strong>National Suicide Prevention Lifeline:</strong> 988 (24/7)
                        </li>
                        <li onclick="alert('Crisis Text Line: Text HOME to 741741')">
                            üí¨ <strong>Crisis Text Line:</strong> Text HOME to 741741
                        </li>
                        <li onclick="alert('SAMHSA Helpline: 1-800-662-4357')">
                            üè• <strong>SAMHSA Helpline:</strong> 1-800-662-4357
                        </li>
                        <li onclick="alert('International Association for Suicide Prevention: https://www.iasp.info/resources/Crisis_Centres/')">
                            üåç <strong>International Resources:</strong> Visit IASP.info
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Caregiver View -->
            <div id="caregiverView" style="display: none;">
                <div class="card" style="background: linear-gradient(135deg, var(--secondary), var(--primary)); color: white; margin-bottom: 25px;">
                    <h2 style="margin-bottom: 15px; color: white;">Welcome, Caregiver</h2>
                    <p style="margin-bottom: 15px;">
                        Thank you for being here. Supporting someone through mental health challenges takes courage, compassion, and knowledge. This section will help you understand, connect, and support effectively.
                    </p>
                    <p style="font-size: 0.9em; opacity: 0.9;">
                        üíô Remember: Taking care of yourself is essential to taking care of others.
                    </p>
                </div>

                <!-- Caregiver Training Modules -->
                <div class="card">
                    <div class="card-title">üéì Caregiver Training Modules</div>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        Evidence-based guidance to help you support your loved one effectively.
                    </p>
                    <div class="modules-grid" id="caregiverModulesContainer"></div>
                </div>

                <!-- Quick Guide for Parents -->
                <div class="card">
                    <div class="card-title">üí¨ Talking to Teens & Young Adults</div>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        Communication strategies that build trust and openness.
                    </p>

                    <div style="margin: 20px 0;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">DO's:</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Listen without judgment:</strong> "I hear you" goes further than "You shouldn't feel that way"</li>
                            <li><strong>Validate their feelings:</strong> "That sounds really difficult" before offering solutions</li>
                            <li><strong>Ask open questions:</strong> "How can I support you?" instead of "What's wrong with you?"</li>
                            <li><strong>Respect their privacy:</strong> Let them share at their own pace</li>
                            <li><strong>Be consistent:</strong> Check in regularly, not just during crises</li>
                            <li><strong>Take threats seriously:</strong> Any mention of self-harm requires immediate attention</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h3 style="color: var(--danger); margin-bottom: 10px;">DON'Ts:</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Don't minimize:</strong> Avoid "It's just a phase" or "Everyone feels sad sometimes"</li>
                            <li><strong>Don't compare:</strong> "I was stressed at your age too" dismisses their experience</li>
                            <li><strong>Don't force it:</strong> Pushing them to talk can backfire; be available instead</li>
                            <li><strong>Don't share everything:</strong> Respect their need for confidential therapy</li>
                            <li><strong>Don't punish symptoms:</strong> Isolation, irritability, and changes in behavior are signs, not choices</li>
                            <li><strong>Don't go it alone:</strong> Professional help is not weakness‚Äîit's wise</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">üó£Ô∏è Conversation Starters:</h4>
                        <p style="margin: 10px 0;">"I've noticed you seem [tired/distant/stressed] lately. I'm here if you want to talk."</p>
                        <p style="margin: 10px 0;">"You don't have to handle this alone. What would help right now?"</p>
                        <p style="margin: 10px 0;">"I care about you, and I'm worried. Can we figure this out together?"</p>
                        <p style="margin: 10px 0;">"It's okay to not be okay. Would talking to someone outside our family help?"</p>
                    </div>
                </div>

                <!-- Warning Signs -->
                <div class="card">
                    <div class="card-title">üö® Warning Signs & When to Intervene</div>

                    <div style="margin: 20px 0;">
                        <h3 style="color: var(--warning); margin-bottom: 10px;">‚ö†Ô∏è Early Warning Signs (Monitor):</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Changes in sleep patterns (too much or too little)</li>
                            <li>Appetite changes or significant weight fluctuation</li>
                            <li>Withdrawal from friends, family, or activities they used to enjoy</li>
                            <li>Declining grades or work performance</li>
                            <li>Increased irritability or emotional outbursts</li>
                            <li>Difficulty concentrating or making decisions</li>
                            <li>Physical complaints (headaches, stomachaches) with no medical cause</li>
                        </ul>
                        <p style="margin-top: 15px; padding: 15px; background: var(--bg-light); border-radius: 10px;">
                            <strong>Action:</strong> Have a gentle conversation. Schedule a check-up with their doctor. Consider therapy as preventive care.
                        </p>
                    </div>

                    <div style="margin: 20px 0;">
                        <h3 style="color: var(--danger); margin-bottom: 10px;">üî¥ Crisis Signs (Immediate Action):</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Talking about wanting to die or suicide</li>
                            <li>Looking for ways to kill themselves (searching online, stockpiling pills)</li>
                            <li>Talking about feeling hopeless or having no purpose</li>
                            <li>Saying they're a burden to others</li>
                            <li>Giving away prized possessions</li>
                            <li>Saying goodbye as if for the last time</li>
                            <li>Extreme mood swings or sudden calmness after depression</li>
                            <li>Self-harm behaviors (cutting, burning)</li>
                            <li>Reckless behavior or substance abuse escalation</li>
                        </ul>
                        <div style="margin-top: 15px; padding: 20px; background: linear-gradient(135deg, var(--danger), var(--accent)); color: white; border-radius: 10px;">
                            <strong style="font-size: 1.2em;">IMMEDIATE ACTION REQUIRED:</strong>
                            <p style="margin-top: 10px;">1. Do NOT leave them alone</p>
                            <p>2. Remove access to weapons, medications, sharp objects</p>
                            <p>3. Call 988 (Suicide & Crisis Lifeline) immediately</p>
                            <p>4. Go to the nearest emergency room</p>
                            <p>5. Call 911 if there's immediate danger</p>
                        </div>
                    </div>
                </div>

                <!-- Self-Care for Caregivers -->
                <div class="card">
                    <div class="card-title">üíö Self-Care for Caregivers</div>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        You cannot pour from an empty cup. Your well-being matters too.
                    </p>

                    <div style="background: linear-gradient(135deg, var(--success), var(--secondary)); padding: 20px; border-radius: 10px; color: white; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">Essential Self-Care Practices:</h3>
                        <ul style="line-height: 2;">
                            <li>‚úì Set boundaries‚Äîit's okay to say "I need a break"</li>
                            <li>‚úì Join a caregiver support group</li>
                            <li>‚úì Maintain your own therapy or counseling</li>
                            <li>‚úì Keep up with your hobbies and friendships</li>
                            <li>‚úì Practice stress-reduction techniques (breathing, meditation)</li>
                            <li>‚úì Get adequate sleep, nutrition, and exercise</li>
                            <li>‚úì Accept that you can't "fix" everything‚Äîand that's okay</li>
                        </ul>
                    </div>

                    <p style="font-style: italic; color: var(--text-light); text-align: center; padding: 15px;">
                        "Taking care of yourself doesn't mean you care less about them. It means you're ensuring you can be there for the long haul."
                    </p>
                </div>

                <!-- Professional Resources -->
                <div class="card">
                    <div class="card-title">üìö Professional Resources for Caregivers</div>
                    <ul class="resources-list">
                        <li onclick="openCaregiverResource('nami')">
                            üèõÔ∏è <strong>NAMI (National Alliance on Mental Illness):</strong> Free family programs and support groups
                        </li>
                        <li onclick="openCaregiverResource('mhfa')">
                            ü©π <strong>Mental Health First Aid:</strong> Training course for caregivers
                        </li>
                        <li onclick="openCaregiverResource('ffcmh')">
                            üë®‚Äçüë©‚Äçüëß <strong>Federation of Families:</strong> Parent-to-parent support
                        </li>
                        <li onclick="openCaregiverResource('jed')">
                            üéì <strong>The Jed Foundation:</strong> Teen and young adult mental health resources
                        </li>
                        <li onclick="openCaregiverResource('afsp')">
                            üíô <strong>AFSP:</strong> American Foundation for Suicide Prevention resources
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Module Modal -->
    <div class="modal" id="moduleModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle" style="color: var(--primary); margin-bottom: 20px;"></h2>
            <div id="modalContent"></div>
            <button class="btn" onclick="completeModule()">Mark as Complete</button>
        </div>
    </div>

    <!-- Crisis Modal -->
    <div class="modal" id="crisisModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeCrisisModal()">&times;</span>
            <h2 style="color: var(--danger); margin-bottom: 20px;">Immediate Support</h2>
            <p style="margin-bottom: 20px; line-height: 1.8;">
                If you're in crisis or having thoughts of suicide, please reach out for immediate help:
            </p>
            <ul style="line-height: 2.5; font-size: 1.1em;">
                <li>üìû <strong>Call 988</strong> - National Suicide Prevention Lifeline</li>
                <li>üí¨ <strong>Text HOME to 741741</strong> - Crisis Text Line</li>
                <li>üè• <strong>Go to your nearest emergency room</strong></li>
                <li>üëÆ <strong>Call 911</strong> if you're in immediate danger</li>
            </ul>
            <p style="margin-top: 30px; padding: 20px; background: var(--bg-light); border-radius: 10px;">
                <strong>You matter. Your life has value. Help is available 24/7.</strong>
            </p>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Fullscreen Breathing Exercise -->
    <div class="breathing-fullscreen" id="breathingFullscreen">
        <button class="breathing-exit-btn" onclick="exitBreathing()" aria-label="Exit breathing exercise">‚úï</button>
        <div class="breathing-instruction" id="breathingInstruction">Get Ready</div>
        <div class="breathing-circle" id="breathingCircleFS">
            <span id="breathingText">Breathe</span>
        </div>
        <div class="breathing-counter" id="breathingCounter">Cycle 0 / 10</div>
        <div class="breathing-progress-bar">
            <div class="breathing-progress-fill" id="breathingProgressFill"></div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Loading...</div>
    </div>

    <script>
        // Data Structure
        const appData = {
            user: { name: 'Friend', streak: 0, totalCheckins: 0 },
            mood: [],
            completedModules: [],
            journal: [],
            activities: [],
            stats: { lessons: 0, minutes: 0, breathingExercises: 0 }
        };

        // Performance Utilities
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }

        // Loading State Management
        function showLoading(text = 'Loading...') {
            const overlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            loadingText.textContent = text;
            overlay.classList.add('active');
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            overlay.classList.remove('active');
        }

        // Dark Mode Functions
        function initDarkMode() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        function toggleDarkMode() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Ripple Effect
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;

            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');

            button.appendChild(ripple);

            ripple.addEventListener('animationend', () => {
                ripple.remove();
            });
        }

        // Add ripple effect to all buttons
        function initRippleEffect() {
            document.querySelectorAll('button, .module-card, .mood-btn').forEach(element => {
                element.addEventListener('click', createRipple);
            });
        }

        // Circular Progress Animation
        function createCircularProgress(element, value, max, suffix = '') {
            const percentage = Math.min((value / max) * 100, 100);
            const progressEl = element.querySelector('.circular-progress');
            const valueEl = element.querySelector('.circular-progress-value');

            if (progressEl && valueEl) {
                // Animate the progress
                setTimeout(() => {
                    progressEl.style.setProperty('--progress', percentage);
                }, 100);

                // Animate the count
                animateCountUp(valueEl, 0, value, 1000, suffix);
            }
        }

        // Count-up animation
        function animateCountUp(element, start, end, duration, suffix = '') {
            const startTime = performance.now();
            const range = end - start;

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function (ease-out cubic)
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const current = Math.floor(start + range * easeOut);

                element.textContent = current + suffix;

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    element.textContent = end + suffix;
                }
            }

            requestAnimationFrame(update);
        }

        // Initialize circular progress indicators
        function initCircularProgress() {
            const indicators = [
                { selector: '#lessons-progress', value: appData.stats.lessons, max: 10, suffix: '' },
                { selector: '#minutes-progress', value: appData.stats.minutes, max: 120, suffix: '' },
                { selector: '#exercises-progress', value: appData.stats.breathingExercises, max: 20, suffix: '' }
            ];

            indicators.forEach(({ selector, value, max, suffix }) => {
                const element = document.querySelector(selector);
                if (element) {
                    createCircularProgress(element, value, max, suffix);
                }
            });
        }

        // Learning Modules
        const modules = [
            {
                id: 1,
                icon: 'üß†',
                title: 'Understanding Anxiety',
                time: '5 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Anxiety is your body's natural response to stress. It's completely normal and everyone experiences it.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Key Points:</h3>
                    <ul style="line-height: 2;">
                        <li>Anxiety is not weakness - it's your brain trying to protect you</li>
                        <li>Physical symptoms (racing heart, sweating) are normal stress responses</li>
                        <li>You can learn to manage anxiety through various techniques</li>
                        <li>Professional help is available and effective</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Quick Action:</h3>
                    <p style="line-height: 1.8;">
                        Next time you feel anxious, try the 4-7-8 breathing technique: Breathe in for 4 counts,
                        hold for 7, exhale for 8. Repeat 3-4 times.
                    </p>
                `
            },
            {
                id: 2,
                icon: 'üí≠',
                title: 'Thought Patterns',
                time: '7 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Our thoughts significantly influence our emotions. Learning to recognize negative thought patterns
                        is the first step to changing them.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Common Patterns:</h3>
                    <ul style="line-height: 2;">
                        <li><strong>All-or-Nothing:</strong> Seeing things in black and white</li>
                        <li><strong>Catastrophizing:</strong> Expecting the worst outcome</li>
                        <li><strong>Mind Reading:</strong> Assuming you know what others think</li>
                        <li><strong>Should Statements:</strong> Rigid rules about how things "should" be</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Practice:</h3>
                    <p style="line-height: 1.8;">
                        When you notice a negative thought, ask: "Is this thought based on facts or feelings?
                        What evidence do I have? What would I tell a friend in this situation?"
                    </p>
                `
            },
            {
                id: 3,
                icon: 'üò¥',
                title: 'Sleep & Mental Health',
                time: '6 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Quality sleep is essential for emotional regulation and mental well-being. Poor sleep can
                        worsen anxiety and depression symptoms.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Sleep Hygiene Tips:</h3>
                    <ul style="line-height: 2;">
                        <li>Keep a consistent sleep schedule, even on weekends</li>
                        <li>Create a relaxing bedtime routine</li>
                        <li>Limit screen time 1 hour before bed</li>
                        <li>Keep your bedroom cool, dark, and quiet</li>
                        <li>Avoid caffeine after 2 PM</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Tonight's Goal:</h3>
                    <p style="line-height: 1.8;">
                        Set a "wind-down" alarm 30 minutes before your target bedtime. Use this time for
                        calming activities like reading, gentle stretching, or meditation.
                    </p>
                `
            },
            {
                id: 4,
                icon: 'ü§ù',
                title: 'Building Connections',
                time: '8 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Social connections are vital for mental health. Even small interactions can boost your mood
                        and provide emotional support.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Ways to Connect:</h3>
                    <ul style="line-height: 2;">
                        <li>Reach out to one person daily - even a simple text counts</li>
                        <li>Join online or in-person support groups</li>
                        <li>Volunteer for causes you care about</li>
                        <li>Practice active listening in conversations</li>
                        <li>Be vulnerable - sharing struggles deepens connections</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">This Week:</h3>
                    <p style="line-height: 1.8;">
                        Challenge yourself to have one meaningful conversation. Ask someone "How are you really doing?"
                        and listen without planning your response.
                    </p>
                `
            },
            {
                id: 5,
                icon: 'üéØ',
                title: 'Setting Boundaries',
                time: '7 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Healthy boundaries protect your energy and well-being. They're not about pushing people away -
                        they're about maintaining relationships sustainably.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Types of Boundaries:</h3>
                    <ul style="line-height: 2;">
                        <li><strong>Time:</strong> Protecting your schedule and priorities</li>
                        <li><strong>Emotional:</strong> Not taking responsibility for others' feelings</li>
                        <li><strong>Physical:</strong> Your personal space and touch preferences</li>
                        <li><strong>Mental:</strong> Respecting differing opinions and beliefs</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Practice Saying:</h3>
                    <p style="line-height: 1.8;">
                        "I need some time to think about that." <br>
                        "That doesn't work for me right now." <br>
                        "I appreciate you thinking of me, but I can't commit to that."
                    </p>
                `
            },
            {
                id: 6,
                icon: 'üåü',
                title: 'Self-Compassion',
                time: '6 min',
                content: `
                    <p style="line-height: 1.8; margin-bottom: 15px;">
                        Self-compassion means treating yourself with the same kindness you'd offer a good friend.
                        It's proven to reduce anxiety and increase resilience.
                    </p>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Three Elements:</h3>
                    <ul style="line-height: 2;">
                        <li><strong>Self-Kindness:</strong> Be gentle with yourself during difficulties</li>
                        <li><strong>Common Humanity:</strong> Remember everyone struggles sometimes</li>
                        <li><strong>Mindfulness:</strong> Observe your feelings without judgment</li>
                    </ul>
                    <h3 style="color: var(--primary); margin: 20px 0 10px;">Daily Practice:</h3>
                    <p style="line-height: 1.8;">
                        When you notice self-criticism, pause. Place your hand on your heart and say:
                        "This is hard right now. I'm doing my best, and that's enough."
                    </p>
                `
            }
        ];

        // Caregiver Training Modules
        const caregiverModules = [
            {
                id: 101,
                icon: 'üß†',
                title: 'Understanding Mental Health Conditions',
                time: '10 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Common Mental Health Conditions in Teens & Young Adults</h3>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Depression:</h4>
                        <p style="line-height: 1.8; margin: 10px 0;">
                            More than sadness‚Äîdepression is a medical condition affecting mood, thinking, and physical health.
                        </p>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Symptoms:</strong> Persistent sadness, loss of interest, fatigue, changes in sleep/appetite, difficulty concentrating</li>
                            <li><strong>Duration:</strong> Symptoms lasting 2+ weeks</li>
                            <li><strong>Not their fault:</strong> Depression is caused by brain chemistry, genetics, and life circumstances‚Äînot weakness</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Anxiety Disorders:</h4>
                        <p style="line-height: 1.8; margin: 10px 0;">
                            Excessive worry or fear that interferes with daily functioning.
                        </p>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Types:</strong> Generalized anxiety, social anxiety, panic disorder, phobias</li>
                            <li><strong>Physical symptoms:</strong> Racing heart, sweating, trembling, stomachaches</li>
                            <li><strong>Impact:</strong> Can affect school, relationships, and quality of life</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Other Conditions:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>ADHD:</strong> Difficulty with focus, organization, impulse control</li>
                            <li><strong>Eating Disorders:</strong> Unhealthy relationship with food and body image</li>
                            <li><strong>Bipolar Disorder:</strong> Extreme mood swings from high to low</li>
                            <li><strong>OCD:</strong> Intrusive thoughts and compulsive behaviors</li>
                            <li><strong>PTSD:</strong> After experiencing or witnessing trauma</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Key Takeaway:</h4>
                        <p style="line-height: 1.8;">
                            Mental health conditions are real medical conditions, not character flaws. They're treatable, and recovery is possible with proper support and professional help.
                        </p>
                    </div>
                `
            },
            {
                id: 102,
                icon: 'üìä',
                title: 'What to Expect During Treatment',
                time: '8 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">The Treatment Journey</h3>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Initial Steps:</h4>
                        <ol style="line-height: 2; margin-left: 20px;">
                            <li><strong>Assessment:</strong> Initial evaluation with a mental health professional</li>
                            <li><strong>Diagnosis:</strong> Understanding what they're experiencing</li>
                            <li><strong>Treatment Plan:</strong> Customized approach (therapy, medication, or both)</li>
                        </ol>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Types of Treatment:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Therapy (Psychotherapy):</strong>
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li>CBT (Cognitive Behavioral Therapy): Changing thought patterns</li>
                                    <li>DBT (Dialectical Behavior Therapy): Managing emotions and relationships</li>
                                    <li>Individual, family, or group therapy</li>
                                </ul>
                            </li>
                            <li><strong>Medication:</strong> Can help balance brain chemistry (psychiatrist prescribed)</li>
                            <li><strong>Lifestyle Changes:</strong> Sleep, exercise, nutrition, stress management</li>
                            <li><strong>Support Groups:</strong> Peer support from others with similar experiences</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Timeline & Expectations:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Not instant:</strong> Treatment takes time‚Äîweeks to months to see significant improvement</li>
                            <li><strong>Ups and downs:</strong> Progress isn't linear; setbacks are normal</li>
                            <li><strong>Medication adjustment:</strong> May take several tries to find the right medication/dose</li>
                            <li><strong>Therapy takes work:</strong> It's not passive‚Äîthey'll have homework and need to practice skills</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Your Role:</h4>
                        <p style="line-height: 1.8;">
                            Be patient. Celebrate small victories. Maintain hope when they struggle to find it. Consistency in showing up matters more than having all the answers.
                        </p>
                    </div>
                `
            },
            {
                id: 103,
                icon: 'üõ°Ô∏è',
                title: 'Crisis Prevention & Safety Planning',
                time: '12 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Creating a Safety Plan Together</h3>

                    <p style="line-height: 1.8; margin-bottom: 20px;">
                        A safety plan is a written, personalized document that helps someone navigate suicidal thoughts or crisis moments. Create this during a calm time, not during crisis.
                    </p>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 1: Recognize Warning Signs</h4>
                        <p>Work together to identify their personal warning signs:</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>Specific thoughts: "Everyone would be better off without me"</li>
                            <li>Images or behaviors: Looking up methods, giving away items</li>
                            <li>Mood changes: Feeling hopeless, trapped, or extreme emotional pain</li>
                            <li>Physical sensations: Chest tightness, numbness</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 2: Internal Coping Strategies</h4>
                        <p>What can they do on their own without contacting others?</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>Distraction: Watch favorite show, play with pet, take a shower</li>
                            <li>Physical: Exercise, breathe deeply, hold ice cubes</li>
                            <li>Sensory: Listen to music, look at photos, use aromatherapy</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 3: Social Support</h4>
                        <p>Who can they reach out to? List specific names and numbers:</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>Trusted family members</li>
                            <li>Close friends who know about their struggles</li>
                            <li>School counselor or coach</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 4: Professional Contacts</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Therapist name and phone: _______________</li>
                            <li>Psychiatrist name and phone: _______________</li>
                            <li>Crisis line: 988</li>
                            <li>Local ER: _______________</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 5: Make Environment Safer</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Remove or secure firearms</li>
                            <li>Lock up medications</li>
                            <li>Remove sharp objects or other means</li>
                            <li>Limit access to alcohol</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Step 6: Reasons for Living</h4>
                        <p>Help them identify what matters most (write it down!):</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>People they care about</li>
                            <li>Pets</li>
                            <li>Future goals or dreams</li>
                            <li>Activities they enjoy</li>
                        </ul>
                    </div>

                    <div style="background: linear-gradient(135deg, var(--danger), var(--accent)); padding: 20px; border-radius: 10px; color: white; margin-top: 20px;">
                        <h4 style="margin-bottom: 10px;">Remember:</h4>
                        <p style="line-height: 1.8;">
                            Having a safety plan doesn't mean crisis will happen, but it provides a roadmap when thinking becomes difficult. Review and update it regularly.
                        </p>
                    </div>
                `
            },
            {
                id: 104,
                icon: '‚ù§Ô∏è',
                title: 'Building Resilience Together',
                time: '9 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Fostering Long-Term Mental Wellness</h3>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Create a Supportive Home Environment:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Open communication:</strong> "Our family talks about feelings"</li>
                            <li><strong>Reduce stigma:</strong> Mental health is as important as physical health</li>
                            <li><strong>Predictable routines:</strong> Consistent meal times, sleep schedules</li>
                            <li><strong>Balanced expectations:</strong> High support, reasonable expectations</li>
                            <li><strong>Celebrate effort:</strong> Not just outcomes</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Promote Healthy Habits:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Sleep:</strong> 8-10 hours for teens, consistent schedule</li>
                            <li><strong>Nutrition:</strong> Regular meals, limit caffeine/sugar</li>
                            <li><strong>Exercise:</strong> 30+ minutes daily, any movement counts</li>
                            <li><strong>Social connection:</strong> Encourage healthy friendships</li>
                            <li><strong>Screen time:</strong> Balance, especially before bed</li>
                            <li><strong>Mindfulness:</strong> Meditation, yoga, nature time</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Build Their Coping Toolbox:</h4>
                        <p>Help them develop multiple strategies:</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>Problem-solving skills</li>
                            <li>Emotional regulation techniques</li>
                            <li>Stress management strategies</li>
                            <li>Conflict resolution abilities</li>
                            <li>Self-advocacy skills (asking for help)</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Strengthen Your Relationship:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Quality time:</strong> Even 15 minutes of focused attention daily</li>
                            <li><strong>Active listening:</strong> Put phone away, make eye contact</li>
                            <li><strong>Shared activities:</strong> Hobbies, walks, cooking together</li>
                            <li><strong>Humor:</strong> Appropriate lightness when not in crisis</li>
                            <li><strong>Physical affection:</strong> Hugs, if they're comfortable</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Long-Term Perspective:</h4>
                        <p style="line-height: 1.8;">
                            Recovery is possible. With treatment, support, and time, most people with mental health conditions live fulfilling lives. Your consistent presence and belief in them matters more than you know.
                        </p>
                    </div>
                `
            },
            {
                id: 105,
                icon: 'üè´',
                title: 'Advocating in School Settings',
                time: '8 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Supporting Your Student's Education</h3>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Know Your Rights & Options:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>504 Plan:</strong> Accommodations for students with disabilities (including mental health conditions)</li>
                            <li><strong>IEP (Individualized Education Program):</strong> For students needing specialized instruction</li>
                            <li><strong>FERPA:</strong> Privacy rights regarding educational records</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Common Accommodations:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Extended time on tests</li>
                            <li>Quiet testing environment</li>
                            <li>Breaks during class</li>
                            <li>Flexible deadlines during episodes</li>
                            <li>Access to school counselor</li>
                            <li>Permission to leave class if overwhelmed</li>
                            <li>Reduced homework during difficult periods</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Communicating with School:</h4>
                        <p>Build a collaborative relationship:</p>
                        <ul style="line-height: 2; margin-left: 20px; margin-top: 10px;">
                            <li>Schedule meeting with counselor, teachers, administrators</li>
                            <li>Provide medical documentation if needed</li>
                            <li>Be specific about challenges and needs</li>
                            <li>Maintain regular communication</li>
                            <li>Document everything in writing</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Remember:</h4>
                        <p style="line-height: 1.8;">
                            Accommodations aren't special treatment‚Äîthey level the playing field. Your student has the right to an education that meets their needs. Don't be afraid to advocate firmly but respectfully.
                        </p>
                    </div>
                `
            },
            {
                id: 106,
                icon: 'üí∞',
                title: 'Navigating Insurance & Costs',
                time: '7 min',
                content: `
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Making Mental Health Care Affordable</h3>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Insurance Coverage:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Mental Health Parity Act:</strong> Requires equal coverage for mental and physical health</li>
                            <li><strong>Check your plan:</strong> Copays, deductibles, in-network providers</li>
                            <li><strong>Pre-authorization:</strong> Some plans require approval before treatment</li>
                            <li><strong>Appeal denials:</strong> You have the right to appeal coverage decisions</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Finding Affordable Care:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Community mental health centers:</strong> Sliding scale fees</li>
                            <li><strong>University training clinics:</strong> Supervised students, lower cost</li>
                            <li><strong>Online therapy:</strong> Often more affordable than in-person</li>
                            <li><strong>Support groups:</strong> Free or low-cost peer support</li>
                            <li><strong>Employee Assistance Programs (EAP):</strong> Free sessions through work</li>
                            <li><strong>Medicaid:</strong> Coverage for eligible families</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary);">Medication Costs:</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li>Ask about generic versions</li>
                            <li>Manufacturer assistance programs</li>
                            <li>GoodRx or similar discount cards</li>
                            <li>90-day supplies for savings</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-light); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Don't Let Cost Be a Barrier:</h4>
                        <p style="line-height: 1.8;">
                            Affordable options exist. Many therapists offer sliding scale fees. Don't hesitate to ask about payment options or financial assistance. Mental health treatment is an investment in their future.
                        </p>
                    </div>
                `
            }
        ];

        // Initialize app
        function init() {
            initDarkMode();
            initRippleEffect();
            loadData();
            updateUI();
            setGreeting();
            renderModules();
            renderCaregiverModules();
            updateStats();
            loadJournalEntries();
            checkAchievements();
        }

        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('mindcareData');
            if (saved) {
                Object.assign(appData, JSON.parse(saved));
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('mindcareData', JSON.stringify(appData));
        }

        // Debounced version for frequent saves
        const saveDataDebounced = debounce(saveData, 500);

        // Set greeting based on time
        function setGreeting() {
            const hour = new Date().getHours();
            let greeting = 'Good evening';
            if (hour < 12) greeting = 'Good morning';
            else if (hour < 18) greeting = 'Good afternoon';

            document.getElementById('greeting').textContent = `${greeting}, ${appData.user.name}`;
        }

        // Show section
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        // Track mood
        function trackMood(mood, emoji) {
            const today = new Date().toDateString();
            const existingIndex = appData.mood.findIndex(m => new Date(m.date).toDateString() === today);

            if (existingIndex >= 0) {
                appData.mood[existingIndex] = { mood, emoji, date: new Date() };
            } else {
                appData.mood.push({ mood, emoji, date: new Date() });
                appData.user.totalCheckins++;
                updateStreak();
            }

            // Visual feedback
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.closest('.mood-btn').classList.add('selected');

            showNotification(`Mood tracked: ${emoji} ${mood}`);
            saveData();
            checkAchievements();

            // Show crisis support if needed
            if (mood === 'crisis') {
                setTimeout(() => showCrisisSupport(), 1000);
            }

            // Update personalized tip
            updateDailyTip(mood);
        }

        // Update streak
        function updateStreak() {
            if (appData.mood.length === 0) {
                appData.user.streak = 0;
                return;
            }

            const sortedMoods = appData.mood.sort((a, b) => new Date(b.date) - new Date(a.date));
            let streak = 1;

            for (let i = 0; i < sortedMoods.length - 1; i++) {
                const current = new Date(sortedMoods[i].date);
                const previous = new Date(sortedMoods[i + 1].date);
                const diffDays = Math.floor((current - previous) / (1000 * 60 * 60 * 24));

                if (diffDays === 1) {
                    streak++;
                } else {
                    break;
                }
            }

            appData.user.streak = streak;
            updateStats();
        }

        // Update stats display
        function updateStats() {
            document.getElementById('streakCount').textContent = appData.user.streak;
            document.getElementById('lessonsCompleted').textContent = appData.stats.lessons;
            document.getElementById('minutesPracticed').textContent = appData.stats.minutes;

            // Update circular progress indicators
            initCircularProgress();
        }

        // Update daily tip based on mood
        function updateDailyTip(mood) {
            const tips = {
                amazing: "You're feeling great! Consider sharing your positive energy with someone who might need it today.",
                good: "Wonderful! Keep building on this momentum with one small act of self-care today.",
                okay: "That's perfectly valid. Remember, 'okay' is still okay. Be gentle with yourself today.",
                struggling: "Thank you for being honest. Would a quick breathing exercise or grounding technique help?",
                crisis: "I'm here with you. Please reach out to a crisis helpline immediately. Your life matters."
            };

            const tip = tips[mood] || tips.okay;
            document.getElementById('dailyTip').innerHTML = `<span class="tip-icon">üí°</span><span>${tip}</span>`;
        }

        // Render modules
        function renderModules() {
            const container = document.getElementById('modulesContainer');
            container.innerHTML = modules.map(module => {
                const completed = appData.completedModules.includes(module.id);
                return `
                    <div class="module-card ${completed ? 'completed' : ''}" onclick="openModule(${module.id})">
                        <div class="module-icon">${module.icon}</div>
                        <div class="module-title">${module.title}</div>
                        <p style="color: var(--text-light); font-size: 0.9em; margin-top: 10px;">
                            ${completed ? 'Completed ‚úì' : 'Not started yet'}
                        </p>
                        <div class="module-time">‚è±Ô∏è ${module.time}</div>
                    </div>
                `;
            }).join('');
        }

        // Open module modal
        let currentModuleId = null;
        function openModule(id) {
            const module = modules.find(m => m.id === id);
            currentModuleId = id;

            document.getElementById('modalTitle').textContent = module.icon + ' ' + module.title;
            document.getElementById('modalContent').innerHTML = module.content;
            document.getElementById('moduleModal').classList.add('active');
        }

        // Close modal
        function closeModal() {
            document.getElementById('moduleModal').classList.remove('active');
            currentModuleId = null;
        }

        // Complete module
        function completeModule() {
            if (currentModuleId && !appData.completedModules.includes(currentModuleId)) {
                appData.completedModules.push(currentModuleId);
                appData.stats.lessons++;
                appData.stats.minutes += 7; // Average module time
                saveData();
                renderModules();
                updateStats();
                checkAchievements();
                showNotification('Module completed! Great job! üéâ');
            }
            closeModal();
        }

        // Breathing exercise
        let breathingActive = false;
        let breathingInterval = null;

        function startBreathing() {
            const fullscreen = document.getElementById('breathingFullscreen');
            const circle = document.getElementById('breathingCircleFS');
            const instruction = document.getElementById('breathingInstruction');
            const text = document.getElementById('breathingText');
            const counter = document.getElementById('breathingCounter');
            const progressFill = document.getElementById('breathingProgressFill');

            // Show fullscreen
            fullscreen.classList.add('active');

            let currentCycle = 0;
            const totalCycles = 10;
            let phase = 0; // 0: inhale, 1: hold, 2: exhale, 3: rest
            const phaseDuration = 4000; // 4 seconds per phase

            // Start progress bar
            setTimeout(() => {
                progressFill.style.width = '100%';
            }, 100);

            function runCycle() {
                if (currentCycle >= totalCycles) {
                    exitBreathing();
                    showNotification('Great job! You completed 10 breathing cycles.', 'success');
                    return;
                }

                const phases = [
                    { class: 'inhale', instruction: 'Breathe In', text: 'Inhale' },
                    { class: 'inhale', instruction: 'Hold', text: 'Hold' },
                    { class: 'exhale', instruction: 'Breathe Out', text: 'Exhale' },
                    { class: 'exhale', instruction: 'Rest', text: 'Rest' }
                ];

                const currentPhase = phases[phase];

                // Update UI
                instruction.textContent = currentPhase.instruction;
                text.textContent = currentPhase.text;
                circle.className = 'breathing-circle ' + currentPhase.class;

                phase++;

                if (phase >= 4) {
                    phase = 0;
                    currentCycle++;
                    counter.textContent = `Cycle ${currentCycle} / ${totalCycles}`;

                    // Update stats every cycle
                    if (currentCycle % 2 === 0) {
                        appData.stats.minutes += 1;
                        updateStats();
                    }
                }

                if (currentCycle < totalCycles) {
                    breathingInterval = setTimeout(runCycle, phaseDuration);
                }
            }

            // Start after a brief delay
            setTimeout(() => {
                instruction.textContent = 'Get Ready';
                counter.textContent = `Cycle 0 / ${totalCycles}`;

                setTimeout(() => {
                    currentCycle = 0;
                    phase = 0;
                    runCycle();
                }, 2000);
            }, 500);

            // Log activity
            logActivity('Breathing Exercise');
            appData.stats.breathingExercises = (appData.stats.breathingExercises || 0) + 1;
            saveData();
            checkAchievements();
        }

        function exitBreathing() {
            const fullscreen = document.getElementById('breathingFullscreen');
            const circle = document.getElementById('breathingCircleFS');
            const progressFill = document.getElementById('breathingProgressFill');

            fullscreen.classList.remove('active');
            circle.classList.remove('inhale', 'exhale');

            if (breathingInterval) {
                clearTimeout(breathingInterval);
                breathingInterval = null;
            }

            // Reset progress bar
            progressFill.style.transition = 'none';
            progressFill.style.width = '0%';
            setTimeout(() => {
                progressFill.style.transition = 'width 16s linear';
            }, 50);
        }

        // Log activity
        function logActivity(activity) {
            appData.activities.push({ activity, date: new Date() });
            saveData();
            showNotification(`${activity} completed! üåü`);
        }

        // Save journal entry
        function saveJournal() {
            const input = document.getElementById('journalInput');
            const text = input.value.trim();

            if (text) {
                appData.journal.unshift({
                    text,
                    date: new Date()
                });
                saveData();
                input.value = '';
                loadJournalEntries();
                showNotification('Journal entry saved üìù');
            }
        }

        // Load journal entries
        function loadJournalEntries() {
            const container = document.getElementById('journalEntries');

            if (appData.journal.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìî</div>
                        <div class="empty-state-title">No Journal Entries Yet</div>
                        <div class="empty-state-description">Start writing to capture your thoughts and feelings</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = appData.journal.map((entry, index) => {
                const date = new Date(entry.date);
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                const entryId = `journal-${index}`;
                const isLong = entry.text.length > 150;

                return `
                    <div class="journal-entry" data-index="${index}">
                        <div class="journal-entry-header">
                            <div class="journal-date">${dateStr} ¬∑ ${timeStr}</div>
                            <button class="journal-delete" onclick="deleteJournalEntry(${index})" aria-label="Delete entry">‚úï</button>
                        </div>
                        <div class="journal-content" id="${entryId}">${entry.text}</div>
                        ${isLong ? `<div class="journal-expand" onclick="toggleJournalExpand('${entryId}')">Read more...</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function toggleJournalExpand(entryId) {
            const content = document.getElementById(entryId);
            const expandBtn = content.nextElementSibling;

            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                if (expandBtn) expandBtn.textContent = 'Read more...';
            } else {
                content.classList.add('expanded');
                if (expandBtn) expandBtn.textContent = 'Show less';
            }
        }

        function deleteJournalEntry(index) {
            if (confirm('Are you sure you want to delete this journal entry?')) {
                appData.journal.splice(index, 1);
                saveData();
                loadJournalEntries();
                showNotification('Journal entry deleted', 'success');
            }
        }

        // Check achievements
        function checkAchievements() {
            const achievements = [
                { id: 'achievement1', condition: appData.user.totalCheckins >= 1 },
                { id: 'achievement2', condition: appData.user.streak >= 3 },
                { id: 'achievement3', condition: appData.stats.lessons >= 5 },
                { id: 'achievement4', condition: (appData.stats.breathingExercises || 0) >= 10 },
                { id: 'achievement5', condition: appData.user.streak >= 7 },
                { id: 'achievement6', condition: appData.user.streak >= 30 }
            ];

            achievements.forEach(achievement => {
                const element = document.getElementById(achievement.id);
                if (achievement.condition && !element.classList.contains('unlocked')) {
                    element.classList.add('unlocked');
                    showNotification('Achievement unlocked! üèÜ');
                }
            });

            // Update progress bar
            const unlockedCount = achievements.filter(a => a.condition).length;
            const percentage = Math.round((unlockedCount / achievements.length) * 100);
            const progressBar = document.getElementById('overallProgress');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
        }

        // Show crisis support
        function showCrisisSupport() {
            document.getElementById('crisisModal').classList.add('active');
        }

        function closeCrisisModal() {
            document.getElementById('crisisModal').classList.remove('active');
        }

        // Share caregiver code
        function shareCaregiverCode() {
            const code = Math.random().toString(36).substring(2, 10).toUpperCase();
            alert(`Your connection code is: ${code}\n\nShare this code with your trusted caregiver. They can use it to connect with you and provide support.`);
        }

        // Show notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Update UI
        function updateUI() {
            updateStats();
            updateStreak();
        }

        // Switch between user and caregiver mode
        function switchMode(mode) {
            if (mode === 'user') {
                document.getElementById('userView').style.display = 'block';
                document.getElementById('caregiverView').style.display = 'none';
                document.getElementById('userModeBtn').style.opacity = '1';
                document.getElementById('caregiverModeBtn').style.opacity = '0.7';
            } else {
                document.getElementById('userView').style.display = 'none';
                document.getElementById('caregiverView').style.display = 'block';
                document.getElementById('userModeBtn').style.opacity = '0.7';
                document.getElementById('caregiverModeBtn').style.opacity = '1';
            }
        }

        // Render caregiver modules
        function renderCaregiverModules() {
            const container = document.getElementById('caregiverModulesContainer');
            if (!container) return;

            container.innerHTML = caregiverModules.map(module => {
                const completed = appData.completedModules && appData.completedModules.includes(module.id);
                return `
                    <div class="module-card ${completed ? 'completed' : ''}" onclick="openModule(${module.id})">
                        <div class="module-icon">${module.icon}</div>
                        <div class="module-title">${module.title}</div>
                        <p style="color: var(--text-light); font-size: 0.9em; margin-top: 10px;">
                            ${completed ? 'Completed ‚úì' : 'Essential reading for caregivers'}
                        </p>
                        <div class="module-time">‚è±Ô∏è ${module.time}</div>
                    </div>
                `;
            }).join('');
        }

        // Open module modal (updated to handle both user and caregiver modules)
        function openModule(id) {
            let module = modules.find(m => m.id === id);
            if (!module) {
                module = caregiverModules.find(m => m.id === id);
            }
            if (!module) return;

            currentModuleId = id;
            document.getElementById('modalTitle').textContent = module.icon + ' ' + module.title;
            document.getElementById('modalContent').innerHTML = module.content;
            document.getElementById('moduleModal').classList.add('active');
        }

        // Open caregiver resource
        function openCaregiverResource(resource) {
            const resources = {
                'nami': {
                    title: 'NAMI (National Alliance on Mental Illness)',
                    info: 'Free family support programs, education courses, and local support groups.\n\nWebsite: nami.org\nHelpline: 1-800-950-NAMI (6264)\n\nPrograms:\n‚Ä¢ Family-to-Family: 8-week education course\n‚Ä¢ Family Support Groups: Peer-led support meetings\n‚Ä¢ NAMI Basics: For parents/caregivers of children & teens'
                },
                'mhfa': {
                    title: 'Mental Health First Aid',
                    info: 'Evidence-based training course that teaches how to identify, understand, and respond to signs of mental illness and substance use disorders.\n\nWebsite: mentalhealthfirstaid.org\n\nYouth Mental Health First Aid is specifically designed for adults who work with youth ages 12-18.'
                },
                'ffcmh': {
                    title: 'Federation of Families for Children\'s Mental Health',
                    info: 'National family-run organization providing peer support, education, and advocacy.\n\nWebsite: ffcmh.org\n\nConnect with other parents who understand what you\'re going through. Local chapters offer support groups and resources.'
                },
                'jed': {
                    title: 'The Jed Foundation',
                    info: 'Protecting emotional health and preventing suicide for teens and young adults.\n\nWebsite: jedfoundation.org\n\nResources for:\n‚Ä¢ Parents talking to teens about mental health\n‚Ä¢ College student mental health\n‚Ä¢ Suicide prevention\n‚Ä¢ Substance abuse'
                },
                'afsp': {
                    title: 'American Foundation for Suicide Prevention',
                    info: 'Leading organization dedicated to saving lives and bringing hope to those affected by suicide.\n\nWebsite: afsp.org\nNational Suicide Prevention Lifeline: 988\n\nResources:\n‚Ä¢ Talk Saves Lives: Educational program\n‚Ä¢ Loss survivor support\n‚Ä¢ Prevention resources\n‚Ä¢ Research and advocacy'
                }
            };

            const res = resources[resource];
            if (res) {
                alert(`${res.title}\n\n${res.info}\n\nNote: This is a simulation. In a real app, this would open the organization's website or provide more interactive resources.`);
            }
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
